<!DOCTYPE html>
<html lang="zh-CN" data-theme-mode="dark">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="MY HOME ä¸ªäººä¸»é¡µ">
    <meta name="keywords" content="Homepage,JavaTool,ä¸ªäººä¸»é¡µ">
    <meta name="author" content="MY HOME">
    <title>MY HOME - ä¸ªäººä¸»é¡µ</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link rel="preload" href="//at.alicdn.com/t/c/font_4552607_0khxww3tj3q9.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/dmego-home-page@latest/assets/css/iconfont.css">
    
    <!-- æ¶²æ€ç»ç’ƒSVGæ»¤é•œ -->
    <svg style="display: none">
      <filter id="glass-distortion">
        <feTurbulence type="fractalNoise" baseFrequency="0.001 0.005" numOctaves="1" seed="17" result="turbulence" />
        <feComponentTransfer in="turbulence" result="mapped">
          <feFuncR type="gamma" amplitude="1" exponent="10" offset="0.5" />
          <feFuncG type="gamma" amplitude="0" exponent="1" offset="0" />
          <feFuncB type="gamma" amplitude="0" exponent="1" offset="0.5" />
        </feComponentTransfer>
        <feGaussianBlur in="turbulence" stdDeviation="3" result="softMap" />
        <feSpecularLighting in="softMap" surfaceScale="5" specularConstant="1" specularExponent="100" lighting-color="white" result="specLight">
          <fePointLight x="-200" y="-200" z="300" />
        </feSpecularLighting>
        <feComposite in="specLight" operator="arithmetic" k1="0" k2="1" k3="1" k4="0" result="litImage" />
        <feDisplacementMap in="SourceGraphic" in2="softMap" scale="200" xChannelSelector="R" yChannelSelector="G" />
      </filter>
    </svg>

    <style type="text/css">

/* ğŸ”¥ æ–°å¢ï¼šå¼€å±åŠ¨ç”»æ ·å¼ - ä¿®æ”¹ä¸ºæ¸…æ–°ç»¿è‰²èƒŒæ™¯ */
#loader {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #ffffff;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    transition: opacity 0.6s ease, visibility 0.6s ease;
}
.loading-left-bg, .loading-right-bg {
    position: absolute;
    top: 0;
    width: 50%;
    height: 100%;
    background: #f5faf7;
    transition: transform 0.6s ease;
}
.loading-left-bg { left: 0; }
.loading-right-bg { right: 0; }
#loader.loaded .loading-left-bg { transform: translateX(-100%); }
#loader.loaded .loading-right-bg { transform: translateX(100%); }
#loader.loaded { opacity: 0; visibility: hidden; }
.spinner-box { text-align: center; }
.loading-taichi svg {
    width: 80px;
    height: 80px;
    fill: #2d8b69;
    transition: fill 0.3s ease;
}
.loading-word {
    margin-top: 20px;
    color: #3a9e7c;
    font-size: 16px;
    letter-spacing: 3px;
    transition: color 0.3s ease;
}

/* ç´§æ€¥ä¿®å¤ï¼šè¡¥å…¨ç¼ºå¤±çš„iconfontåŸºç¡€æ ·å¼ */
.iconfont {
    font-family: "iconfont" !important;
    font-size: inherit;
    font-style: normal;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* âœ…âœ…âœ… æ ¸å¿ƒå‡çº§ï¼šæ¶²æ€ç»ç’ƒæ•ˆæœé€šç”¨æ ·å¼ã€iOSé€šé€ç‰ˆã€‘é€‚é…åŒä¸»é¢˜ */
.glass-effect {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(12px) saturate(180%) contrast(1.1) brightness(1.05);
    -webkit-backdrop-filter: blur(12px) saturate(180%) contrast(1.1) brightness(1.05);
    border: 1px solid rgba(255, 255, 255, 0.15);
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.08),
        inset 1px 1px 0 rgba(255, 255, 255, 0.2),
        inset -1px -1px 0 rgba(0, 0, 0, 0.05);
    position: relative;
    overflow: hidden;
}
.glass-effect-light {
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.3);
}
.glass-effect-dark {
    background: rgba(30, 30, 40, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.08);
}

/* å…¨å±€é‡ç½®å’Œä¿®å¤ */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}
html, body {
    overflow-x: hidden !important;
    position: relative;
    width: 100%;
}
html {
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}
/* ========== æ ¸å¿ƒä¿®æ”¹1ï¼šæ·±è‰²ä¸»é¢˜ æ£®ç³»å¢¨ç»¿é…è‰² + æè‡´åœ†æ¶¦å­—ä½“ ========== */
html[data-theme-mode="dark"] {
    --bg-base: rgba(15, 18, 26, 0.7);
    --bg-mask: linear-gradient(rgba(15, 18, 26, 0.7), rgba(15, 18, 26, 0.65));
    --bg-card: rgba(28,32,42,0.9);
    --bg-card-light: rgba(28,32,42,0.75);
    --bg-nav: rgba(28, 32, 42, 0.6);
    --bg-footer: rgba(28,32,42,0.6);
    --color-text-main: #e2e8e5;
    --color-text-sub: #b8c4bc;
    --color-text-title: #f2f8f5;
    --color-green: #38a169;
    --color-green-deep: #2d8b69;
    --border-color: rgba(255, 255, 255, 0.1);
    --border-color-light: rgba(255,255,255,0.07);
    --shadow-color: rgba(0,0,0,0.25);
    --scrollbar-thumb: rgba(45, 139, 105, 0.6);
    --scrollbar-track: rgba(22,25,29,0.8);
    --glass-bg: rgba(40, 44, 52, 0.08);
    --glass-border: rgba(255, 255, 255, 0.1);
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    --glass-inset-light: rgba(255, 255, 255, 0.1);
    --glass-inset-dark: rgba(0, 0, 0, 0.05);
    --hover-glow: rgba(45, 139, 105, 0.3);
    --active-scale: 0.97;
    /* âœ… æè‡´åœ†æ¶¦å­—ä½“ç»„åˆ - å½»åº•å»æ‰æ–¹æ­£å­—ä½“ */
    --font-family-main: "æ€æºåœ†è§’ CN", "PingFang SC Round", "Microsoft YaHei UI Light", "åœ†æ¶¦é»‘ä½“ CN", "è‹¹æ–¹-åœ†è§’", sans-serif;
    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-bold: 600;
}
/* ========== æ ¸å¿ƒä¿®æ”¹2ï¼šæµ…è‰²ä¸»é¢˜ æ¸…æ–°è–„è·ç»¿é…è‰² + æè‡´åœ†æ¶¦å­—ä½“ ========== */
html[data-theme-mode="light"] {
    --bg-base: #ffffff;
    --bg-mask: rgba(255,255,255,0.4); 
    --bg-card: rgba(255,255,255,0.94);
    --bg-card-light: rgba(255,255,255,0.85);
    --bg-nav: rgba(255, 255, 255, 0.75);
    --bg-footer: rgba(255,255,255,0.75);
    --color-text-main: #2d3748;
    --color-text-sub: #6c776e;
    --color-text-title: #1a202c;
    --color-green: #48bb78;
    --color-green-deep: #38a169;
    --border-color: rgba(0, 0, 0, 0.12);
    --border-color-light: rgba(0,0,0,0.08);
    --shadow-color: rgba(0,0,0,0.12);
    --scrollbar-thumb: rgba(56, 161, 105, 0.7);
    --scrollbar-track: rgba(245, 250, 247, 0.8);
    --glass-bg: rgba(255, 255, 255, 0.1);
    --glass-border: rgba(0, 0, 0, 0.05);
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.05);
    --glass-inset-light: rgba(255, 255, 255, 0.2);
    --glass-inset-dark: rgba(0, 0, 0, 0.03);
    --hover-glow: rgba(56, 161, 105, 0.25);
    --active-scale: 0.98;
    /* âœ… æè‡´åœ†æ¶¦å­—ä½“ç»„åˆ - å½»åº•å»æ‰æ–¹æ­£å­—ä½“ */
    --font-family-main: "æ€æºåœ†è§’ CN", "PingFang SC Round", "Microsoft YaHei UI Light", "åœ†æ¶¦é»‘ä½“ CN", "è‹¹æ–¹-åœ†è§’", sans-serif;
    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-bold: 600;
}
/* ========== æ ¸å¿ƒä¿®æ”¹3ï¼šå…¨å±€å­—ä½“åœ†æ¶¦åŒ–+å¹³æ»‘å¤„ç† ========== */
body {
    font-family: var(--font-family-main);
    min-height: 100vh;
    color: var(--color-text-main);
    scroll-behavior: smooth;
    background-size: cover;
    display: flex;
    flex-direction: column;
    position: relative;
    z-index: 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-text-stroke: 0.2px transparent;
    text-rendering: optimizeLegibility;
    font-size: 15px;
    line-height: 1.75;
    width: 100%;
    transition: font-size 0.3s ease, color 0.3s ease, font-weight 0.3s ease;
    letter-spacing: 0.3px; /* æ–‡å­—é—´è·å¾®è°ƒï¼Œæ›´åœ†æ¶¦èˆ’å±• */
}
body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--bg-mask);
    z-index: -2;
    display: var(--mask-display, block);
}
a {
    text-decoration: none;
    color: inherit;
}
ul {
    list-style: none;
}
img {
    max-width: 100%;
    border-radius: 8px;
    object-fit: cover;
    object-position: center;
    opacity: 1; /* âœ… æ ¸å¿ƒä¿®å¤ï¼šé»˜è®¤æ˜¾ç¤ºï¼Œä¸å†é€æ˜ */
    transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    transform: translateZ(0);
    will-change: opacity, transform;
}
img.lazy-img { /* âœ… åªç»™éœ€è¦æ‡’åŠ è½½çš„å›¾ç‰‡åŠ é€æ˜ï¼Œå£çº¸ç¼©ç•¥å›¾ä¸å—å½±å“ */
    opacity: 0;
}
img.loaded {
    opacity: 1;
}
img:hover {
    transform: scale(1.02);
}
.sidebar-author img {
    opacity: 1 !important;
    display: block !important;
    margin: 0 auto 10px auto;
}
video {
    max-width: 100%;
    border-radius: 8px;
    object-fit: cover;
    object-position: center;
    opacity: 0;
    transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    cursor: pointer;
    transform: translateZ(0);
    will-change: transform;
}
video.loaded {
    opacity: 1;
}
.rotate {
    transition: transform 4s linear infinite;
}
.rotate:hover {
    transform: rotate(360deg);
}
.container {
    flex: 1;
    position: relative;
    z-index: 3;
    width: 100%;
    max-width: 100vw;
    padding-bottom: 80px;
}
.container-main {
    display: flex;
    gap: 20px;
    max-width: 1200px;
    margin: 20px auto;
    padding: 0 20px;
    position: relative;
    z-index: 5;
    width: 100%;
    min-height: calc(100vh - 200px);
    align-items: flex-start;
}

/* ========== å¯¼èˆªæ æ ·å¼ã€æ¶²æ€ç»ç’ƒç‰ˆã€‘æè‡´ç¾åŒ– âœ¨âœ¨âœ¨ ç»ˆæåŠ¨ç”»ç‰ˆ - å®Œç¾é€‰ä¸­+æ‚¬æµ®+æŒ‰å‹ ç»¿è‰²é€‚é… ========== */
#header-nav {
    width: calc(100% - 40px);
    margin: 15px auto 0 auto;
    border-radius: 20px;
    padding: 12px 20px;
    position: sticky;
    top: 15px;
    z-index: 99;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0;
    background: var(--glass-bg);
    backdrop-filter: blur(12px) saturate(180%) contrast(1.1) brightness(1.05);
    -webkit-backdrop-filter: blur(12px) saturate(180%) contrast(1.1) brightness(1.05);
    border: 1px solid var(--glass-border);
    box-shadow: 
        var(--glass-shadow),
        inset 1px 1px 0 var(--glass-inset-light),
        inset -1px -1px 0 var(--glass-inset-dark);
}
.nav-center {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 1;
    gap: 25px;
    margin: 0;
    padding: 0;
}
.main-nav-link-wrap {
    margin: 0;
    display: inline-block;
}
.main-nav-link {
    padding: 10px 28px;
    font-size: 15px;
    font-weight: var(--font-weight-medium);
    color: var(--color-text-sub);
    border-radius: 26px;
    transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    overflow: hidden;
    background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(0,0,0,0.02));
    backdrop-filter: blur(10px) saturate(200%);
    -webkit-backdrop-filter: blur(10px) saturate(200%);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 
        inset 1px 1px 0 rgba(255,255,255,0.15),
        inset -1px -1px 0 rgba(0,0,0,0.06),
        0 2px 4px rgba(0,0,0,0.03);
    transform: translateZ(0);
}
.main-nav-link.active {
    color: #fff !important;
    background: linear-gradient(145deg, rgba(56,161,105,0.2), rgba(45,139,105,0.15)) !important;
    border-color: rgba(56, 161, 105, 0.5) !important;
    font-weight: var(--font-weight-bold);
    box-shadow: 
        0 8px 25px var(--hover-glow),
        inset 1px 1px 0 rgba(255,255,255,0.2),
        inset -1px -1px 0 rgba(0,0,0,0.08);
    transform: scale(1.03);
}
.main-nav-link:hover:not(.active) {
    color: var(--color-green) !important;
    background: rgba(56, 161, 105, 0.08) !important;
    border-color: rgba(56,161,105,0.4) !important;
    transform: translateY(-3px) scale(1.02);
    box-shadow: 
        0 8px 20px var(--hover-glow),
        inset 1px 1px 0 var(--glass-inset-light),
        inset -1px -1px 0 var(--glass-inset-dark);
}
.main-nav-link:active {
    transform: translateY(0) scale(var(--active-scale));
    box-shadow:0 2px 8px rgba(56,161,105,0.1) !important;
}
.main-nav-link::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
	height: 0;
    border-radius: 50%;
    background: rgba(56, 161, 105, 0.12);
    transform: translate(-50%, -50%);
    transition: width 0.7s ease, height 0.7s ease;
}
.main-nav-link:active::after {
    width: 320px;
    height: 320px;
}
.nav-right {
    width: 160px;
    display: flex;
    align-items:center;
    justify-content:flex-end;
    flex-shrink:0;
    margin:0;padding:0;
}
.github-login-btn, .user-name-display {
    padding:8px 16px;font-size:14px;color:var(--color-text-sub);background:transparent;border:1px solid rgba(255,255,255,0.08);border-radius:20px;cursor:pointer;transition:all 0.4s cubic-bezier(0.34,1.56,0.64,1);display:flex;align-items:center;gap:6px;backdrop-filter:blur(8px) saturate(180%);-webkit-backdrop-filter:blur(8px) saturate(180%);box-shadow:inset 1px 1px 0 rgba(255,255,255,0.1),inset -1px -1px 0 rgba(0,0,0,0.05);
}
.github-login-btn:hover, .user-name-display:hover {
    background:rgba(56,161,105,0.08);color:var(--color-green);transform:translateY(-3px) scale(1.02);border-color:rgba(56,161,105,0.2);box-shadow:0 6px 20px var(--hover-glow);
}
.github-login-btn:active, .user-name-display:active {transform:translateY(0) scale(var(--active-scale));}
.user-name-display {color:var(--color-green);}
.theme-bg-switch-group {position:absolute;left:20px;top:50%;transform:translateY(-50%);display:flex;align-items:center;gap:12px;z-index:1;}
.theme-switch-wrap {width:55px;display:flex;align-items:center;justify-content:flex-start;flex-shrink:0;margin:0;padding:0;position:static;transform:none;}
.bg-switch-wrap {width:90px;height:26px;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin:0;padding:0;}
.bg-switch-btn {width:90px;height:26px;border-radius:34px;background-color:transparent;border:1px solid var(--border-color);cursor:pointer;display:flex;align-items:center;justify-content:center;gap:4px;color:var(--color-text-sub);font-size:13px;transition:all 0.4s cubic-bezier(0.34,1.56,0.64,1);backdrop-filter:blur(3px) saturate(150%);-webkit-backdrop-filter:blur(3px) saturate(150%);box-shadow:inset 1px 1px 0 var(--glass-inset-light),inset -1px -1px 0 var(--glass-inset-dark);}
/* ========== æ–°å¢ï¼šåˆ‡æ¢èƒŒæ™¯æŒ‰é’®æ‚¬æµ®æç¤ºæ¡†æ ·å¼ - å’Œæ–°é—»æ¡†ç»ç’ƒæ•ˆæœä¸€è‡´ ========== */
.bg-switch-wrap {
    position: relative; /* å¿…é¡»åŠ ï¼Œè®©æç¤ºæ¡†ç›¸å¯¹æŒ‰é’®å®šä½ */
}
/* æç¤ºæ¡†å°ç®­å¤´ - é”¦ä¸Šæ·»èŠ±ï¼ŒæŒ‡å‘æŒ‰é’®ï¼Œæ›´ç¾è§‚ */
.bg-tips-box::before {
    content: '';
    position: absolute;
    top: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-bottom: 6px solid var(--glass-border);
}
/* æ˜¾ç¤ºçŠ¶æ€ */
.bg-tips-box.show {
    opacity: 1;
    pointer-events: all;
}
.bg-switch-btn:hover {background-color:rgba(56,161,105,0.08);border-color:rgba(56,161,105,0.3);box-shadow:0 0 12px var(--hover-glow);color:var(--color-green);transform:translateY(-3px) scale(1.03);}
.bg-switch-btn:active {transform:translateY(0) scale(var(--active-scale));}
.theme-switch {position:relative;display:inline-block;width:52px;height:26px;cursor:pointer;}
.theme-switch input {opacity:0;width:0;height:0;}
.theme-slider {position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:transparent;border-radius:34px;border:1px solid var(--border-color);transition:all 0.3s cubic-bezier(0.34,1.56,0.64,1);backdrop-filter:blur(3px) saturate(150%);-webkit-backdrop-filter:blur(3px) saturate(150%);box-shadow:inset 1px 1px 0 rgba(255,255,255,0.1),inset -1px -1px 0 rgba(0,0,0,0.05);}
.theme-slider:before {position:absolute;content:"";height:20px;width:20px;left:2px;bottom:2px;background-color:rgba(255,255,255,0.9);border-radius:50%;transition:all 0.3s cubic-bezier(0.34,1.56,0.64,1);display:flex;align-items:center;justify-content:center;color:#333;font-size:10px;content:"ğŸŒ™";box-shadow:0 2px 6px rgba(0,0,0,0.15);}
input:checked + .theme-slider {background-color:rgba(56,161,105,0.08);border-color:rgba(56,161,105,0.2);box-shadow:0 0 10px var(--hover-glow);}
input:checked + .theme-slider:before {transform:translateX(26px);content:"â˜€ï¸";background-color:var(--color-green);color:#fff;box-shadow:0 2px 8px rgba(56,161,105,0.3);}
.theme-slider:hover {box-shadow:0 0 10px var(--hover-glow);}

/* ======================================
   âœ¨ é»‘è‰²ä¸»é¢˜ä¸“å± å­—ä½“å¤§å°+ç²—ç»† ç²¾ç»†åŒ–ç¾åŒ–
   ====================================== */
html[data-theme-mode="dark"] .sidebar-author-name {font-size:18px;font-weight:var(--font-weight-bold);letter-spacing:1px;}
html[data-theme-mode="dark"] .sidebar-description {font-size:14px;font-weight:var(--font-weight-light);color:var(--color-text-sub);}
html[data-theme-mode="dark"] .sidebar-menu-link {font-size:15px;font-weight:var(--font-weight-normal);}
html[data-theme-mode="dark"] .sidebar-menu-link:hover {font-weight:var(--font-weight-bold);}
html[data-theme-mode="dark"] .main-nav-link {color:var(--color-text-sub);border-color:rgba(255,255,255,0.1);box-shadow:inset 1px 1px 0 rgba(255,255,255,0.2),inset -1px -1px 0 rgba(0,0,0,0.06);}
html[data-theme-mode="dark"] .article-title {font-size:28px;font-weight:var(--font-weight-bold);color:var(--color-text-title);letter-spacing:1px;}
html[data-theme-mode="dark"] .article-signature {font-size:16px;font-weight:var(--font-weight-light);line-height:1.8;}
html[data-theme-mode="dark"] .article-signature strong {font-weight:var(--font-weight-bold);color:var(--color-green);}
html[data-theme-mode="dark"] .search-input {font-size:15px;font-weight:var(--font-weight-normal);}
html[data-theme-mode="dark"] .search-btn {font-size:15px;font-weight:var(--font-weight-bold);}
html[data-theme-mode="dark"] .news-title {font-size:24px;font-weight:var(--font-weight-bold);letter-spacing:0.5px;color:var(--color-text-title) !important;}
html[data-theme-mode="dark"] .news-content {font-size:17px;font-weight:var(--font-weight-normal);line-height:1.9;color:var(--color-text-main) !important;}
html[data-theme-mode="dark"] .news-date {font-size:13px;font-weight:var(--font-weight-light);opacity:0.9;}
html[data-theme-mode="dark"] .modal-news-title {font-size:25px;font-weight:var(--font-weight-bold);letter-spacing:1px;}
html[data-theme-mode="dark"] .modal-news-desc {font-size:17px;font-weight:var(--font-weight-normal);line-height:1.9;}
html[data-theme-mode="dark"] .modal-news-date {font-size:12px;font-weight:var(--font-weight-light);}
html[data-theme-mode="dark"] .update-log-title {font-size:15px;font-weight:var(--font-weight-bold);}
html[data-theme-mode="dark"] .update-log-version {font-size:14px;font-weight:var(--font-weight-bold);}
html[data-theme-mode="dark"] .update-log-content {font-size:13px;font-weight:var(--font-weight-light);line-height:1.7;}
html[data-theme-mode="dark"] #footer {font-size:13px;font-weight:var(--font-weight-light);}
html[data-theme-mode="dark"] #footer a {font-weight:var(--font-weight-bold);}
html[data-theme-mode="dark"] .music-text {font-size:12px;font-weight:var(--font-weight-light);}
html[data-theme-mode="dark"] .bg-switch-btn {font-size:13px;font-weight:var(--font-weight-normal);}
html[data-theme-mode="dark"] .news-item:hover .news-title {color:var(--color-green) !important;font-weight:700;}
/* ======================================
   âœ¨ ç™½è‰²ä¸»é¢˜ä¸“å± å­—ä½“å¤§å°+ç²—ç»† ç²¾ç»†åŒ–ç¾åŒ–
   ====================================== */
html[data-theme-mode="light"] .sidebar-author-name {font-size:19px;font-weight:var(--font-weight-bold);letter-spacing:1px;}
html[data-theme-mode="light"] .sidebar-description {font-size:14px;font-weight:var(--font-weight-light);color:var(--color-text-sub);}
html[data-theme-mode="light"] .sidebar-menu-link {font-size:15px;font-weight:var(--font-weight-normal);}
html[data-theme-mode="light"] .sidebar-menu-link:hover {font-weight:var(--font-weight-bold);}
html[data-theme-mode="light"] .main-nav-link {color:var(--color-text-main);border-color:rgba(0,0,0,0.1);box-shadow:inset 1px 1px 0 rgba(255,255,255,0.9), inset -1px -1px 0 rgba(0,0,0,0.06);}
html[data-theme-mode="light"] .main-nav-link:hover:not(.active) {color:var(--color-green-deep) !important;background:rgba(56,161,105,0.08) !important;border-color:rgba(56,161,105,0.4) !important;transform:translateY(-3px) scale(1.02);box-shadow:0 8px 20px var(--hover-glow);}
html[data-theme-mode="light"] .main-nav-link.active {color:#fff !important;font-weight:var(--font-weight-bold);background:linear-gradient(145deg, rgba(56,161,105,0.25), rgba(45,139,105,0.2)) !important;border-color:rgba(56,161,105,0.6) !important;}
html[data-theme-mode="light"] .article-title {font-size:30px;font-weight:var(--font-weight-bold);color:var(--color-text-title);letter-spacing:2px;}
html[data-theme-mode="light"] .article-signature {font-size:16px;font-weight:var(--font-weight-light);line-height:1.8;}
html[data-theme-mode="light"] .article-signature strong {font-weight:var(--font-weight-bold);color:var(--color-green);}
html[data-theme-mode="light"] .search-input {font-size:15px;font-weight:var(--font-weight-normal);}
html[data-theme-mode="light"] .search-btn {font-size:15px;font-weight:var(--font-weight-bold);}
html[data-theme-mode="light"] .news-title {font-size:25px;font-weight:var(--font-weight-bold);letter-spacing:0.5px;color:var(--color-text-title) !important;}
html[data-theme-mode="light"] .news-content {font-size:17px;font-weight:var(--font-weight-normal);line-height:1.9;color:var(--color-text-main) !important;}
html[data-theme-mode="light"] .news-date {font-size:13px;font-weight:var(--font-weight-light);opacity:0.9;}
html[data-theme-mode="light"] .modal-news-title {font-size:26px;font-weight:var(--font-weight-bold);letter-spacing:1px;}
html[data-theme-mode="light"] .modal-news-desc {font-size:17px;font-weight:var(--font-weight-normal);line-height:1.9;}
html[data-theme-mode="light"] .modal-news-date {font-size:12px;font-weight:var(--font-weight-light);}
html[data-theme-mode="light"] .update-log-title {font-size:15px;font-weight:var(--font-weight-bold);}
html[data-theme-mode="light"] .update-log-version {font-size:14px;font-weight:var(--font-weight-bold);}
html[data-theme-mode="light"] .update-log-content {font-size:13px;font-weight:var(--font-weight-light);line-height:1.7;}
html[data-theme-mode="light"] #footer {font-size:13px;font-weight:var(--font-weight-light);}
html[data-theme-mode="light"] #footer a {font-weight:var(--font-weight-bold);}
html[data-theme-mode="light"] .music-text {font-size:12px;font-weight:var(--font-weight-light);}
html[data-theme-mode="light"] .bg-switch-btn {font-size:13px;font-weight:var(--font-weight-normal);}
html[data-theme-mode="light"] .news-item:hover .news-title {color:var(--color-green) !important;font-weight:700;}
/* ========== ä¾§è¾¹æ æ ·å¼ ã€å®Œç¾ä¿®å¤âœ… è·Ÿéšæ»šåŠ¨+ä¿ç•™æ‰€æœ‰ç¾åŒ–æ•ˆæœã€‘ ========== */
#sidebar {
  width:270px;
  position:sticky !important;
  top: 88px;
  flex-shrink:0;
  margin-top:0;
  margin-left: -15px;
  margin-right: 8px;
  height: auto;
  align-self:flex-start;
  z-index:9;
}
.sidebar-wrap {
  background:var(--glass-bg);
  border-radius:20px;
  padding:25px;
  box-shadow:var(--glass-shadow),inset 1px 1px 0 var(--glass-inset-light),inset -1px -1px 0 var(--glass-inset-dark);
  border:1px solid var(--glass-border);
  transition:box-shadow 0.3s ease, transform 0.3s ease;
  backdrop-filter:blur(12px) saturate(180%) contrast(1.1);
  -webkit-backdrop-filter:blur(12px) saturate(180%) contrast(1.1);
  position:relative;
}
.sidebar-wrap:hover {box-shadow:0 10px 30px rgba(0,0,0,0.1),0 0 20px var(--hover-glow);}
.update-log-time-text {font-size:12px;color:var(--color-text-sub);padding-left:15px;margin-top:2px;}
.sidebar-author {text-align:center;}
.sidebar-author img {width:100px;height:100px;border-radius:50%;border:2px solid rgba(56,161,105,0.15);margin-bottom:10px;box-shadow:0 0 20px rgba(56,161,105,0.1);transition:all 0.6s cubic-bezier(0.34,1.56,0.64,1);}
.sidebar-author img:hover {transform:scale(1.15) rotate(5deg);box-shadow:0 0 40px var(--hover-glow);border-color:rgba(56,161,105,0.4);}
.sidebar-author-name {font-size:18px;font-weight:var(--font-weight-bold);color:var(--color-text-title);margin-bottom:5px;}
.sidebar-description {color:var(--color-text-sub);font-size:14px;font-weight:var(--font-weight-light);}
.sidebar-social {display:flex;justify-content:center;gap:20px;font-size:22px;margin:0px 0;}
.sidebar-social a {color:var(--color-text-sub);transition:all 0.5s cubic-bezier(0.34,1.56,0.64,1);}
.sidebar-social a:hover {color:var(--color-green);transform:translateY(-4px) scale(1.3);text-shadow:0 0 10px var(--hover-glow);}
.sidebar-menu-link-wrap {margin:15px 0;}
.sidebar-menu-link {color:var(--color-text-sub);font-size:15px;padding:8px 0;display:block;transition:all 0.4s cubic-bezier(0.34,1.56,0.64,1);font-weight:var(--font-weight-normal);}
.sidebar-menu-link:hover {color:var(--color-green);padding-left:8px;transform:translateX(2px);font-weight:var(--font-weight-bold);}
/* ç½‘ç«™è®¿é—®ç»Ÿè®¡æ ·å¼ - é€‚é…åŒä¸»é¢˜ï¼Œå’Œä¾§è¾¹æ é£æ ¼ç»Ÿä¸€ */
.sidebar-stat-wrap {
    margin-bottom: 4px 0;
    padding: 0px 0;
    border-radius: 12px;
    display: flex;
    /* æŠŠ space-around æ”¹æˆ centerï¼Œå•ä¸ªå…ƒç´ å±…ä¸­ */
    justify-content: center;
    align-items: center;
    background: rgba(255,255,255,0.05);
}
.stat-item {
    text-align: center; 
    flex: 1; 
    user-select: none;
    pointer-events: none;
}
.sidebar-stat-title {
    font-size: 15px;
    font-weight: var(--font-weight-bold);
    color: var(--color-green);
    margin-bottom: 10px;
    padding-bottom: 6px;
    border-bottom: 1px solid rgba(56,161,105,0.1);
    text-align: center;
}
.sidebar-stat-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 0;
    font-size: 14px;
}
.stat-icon {
    width: 20px;
    text-align: center;
}
.stat-text {
    font-size: 12px;
    color: var(--color-text-sub);
}
.stat-num {
    font-size: 22px;
    font-weight: var(--font-weight-bold);
    color: var(--color-green);
    margin-bottom: -5px;
}
.sidebar-update-log {margin-top:0px;padding:16px;background:transparent;border-radius:16px;border:1px solid rgba(255,255,255,0.08);max-height:220px;overflow-y:auto;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);}
.sidebar-update-log::-webkit-scrollbar {display:none;}
.update-log-title {font-size:15px;font-weight:var(--font-weight-bold);color:var(--color-green);margin-bottom:12px;padding-bottom:6px;border-bottom:1px solid rgba(56,161,105,0.1);}
.update-log-version {font-size:14px;font-weight:var(--font-weight-bold);color:var(--color-text-title);margin:10px 0 4px 0;}
.update-log-content {font-size:13px;color:var(--color-text-sub);padding-left:15px;line-height:1.7;font-weight:var(--font-weight-light);}
.update-log-time {margin-top:15px;padding-top:10px;border-top:1px solid var(--border-color-light);font-size:12px;color:var(--color-text-sub);text-align:center;}
/* ========== ä¸»å†…å®¹åŒºåŸŸ ========== */
#content {
  flex: 1;
  width: 100%;
  position:relative;
  z-index:6;
  margin: 0 auto;
  text-align: center;
}
#main {
  flex:1;
  position:relative;
  z-index:6;
  max-width: 100%;
  margin: 0 auto;
}
.article-inner {
    background: var(--glass-bg);
    border-radius: 20px;
    padding: 30px 35px 35px 35px;
    margin-bottom: 25px;
    box-shadow: var(--glass-shadow), inset 1px 1px 0 var(--glass-inset-light), inset -1px -1px 0 var(--glass-inset-dark);
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(12px) saturate(180%) contrast(1.1);
    -webkit-backdrop-filter: blur(12px) saturate(180%) contrast(1.1);
    position: relative;
    transition: all 0.3s ease;
    margin: 0 auto 25px auto;
}
.article-inner .search-box-container {
    width: 100%;
    display: flex;
    gap: 10px;
    margin: 25px 0 0 0;
    align-items:center;
    justify-content:center;
}

.article-inner:hover {box-shadow:0 10px 30px rgba(0,0,0,0.08),0 0 20px var(--hover-glow);}
.article-title {font-size:28px;text-align:center;color:var(--color-text-title);margin-bottom:15px;font-weight:var(--font-weight-bold);letter-spacing:1px;}
.article-signature {text-align:center;line-height:2;font-size:16px;color:var(--color-text-sub);padding:0 10px;font-weight:var(--font-weight-light);}

/* âœ…âœ…âœ… æ–°å¢ï¼šæœç´¢æ¡†+æœç´¢/é‡ç½®æŒ‰é’® HTMLç»“æ„ */
.search-box-container {width:100%;display:flex;gap:10px;align-items:center;justify-content:center;}
.search-input {flex:1;height:42px;background:transparent;border:1px solid var(--glass-border);border-radius:12px;padding:0 20px;color:var(--color-text-main);font-size:15px;outline:none;transition:all 0.3s ease;backdrop-filter:blur(10px) saturate(150%);-webkit-backdrop-filter:blur(10px) saturate(150%);box-shadow:inset 1px 1px 0 var(--glass-inset-light),inset -1px -1px 0 var(--glass-inset-dark);font-family:var(--font-family-main);}
.search-input::placeholder {color:var(--color-text-sub);font-size:14px;font-weight:var(--font-weight-light);}
.search-input:focus {border-color:rgba(56,161,105,0.4);box-shadow:0 0 15px var(--hover-glow),inset 1px 1px 0 var(--glass-inset-light),inset -1px -1px 0 var(--glass-inset-dark);}
.search-btn {height:42px;padding:0 25px;background:transparent;border:1px solid var(--glass-border);border-radius:12px;color:var(--color-green);font-size:15px;cursor:pointer;transition:all 0.4s cubic-bezier(0.34,1.56,0.64,1);display:flex;align-items:center;justify-content:center;backdrop-filter:blur(10px) saturate(180%);-webkit-backdrop-filter:blur(10px) saturate(180%);box-shadow:var(--glass-shadow),inset 1px 1px 0 var(--glass-inset-light),inset -1px -1px 0 var(--glass-inset-dark);font-weight:var(--font-weight-medium);}
.search-btn:hover {background:rgba(56,161,105,0.08);transform:translateY(-3px) scale(1.02);border-color:rgba(56,161,105,0.4);box-shadow:0 8px 20px var(--hover-glow),inset 1px 1px 0 var(--glass-inset-light),inset -1px -1px 0 var(--glass-inset-dark);}
.search-btn:active {transform:translateY(0) scale(var(--active-scale));box-shadow:0 2px 8px rgba(56,161,105,0.1) !important;}
.search-empty-tips {text-align:center;color:var(--color-text-sub);padding:40px 20px;font-size:15px;width:100%;font-weight:var(--font-weight-light);}

.news-container {width:100%;display:flex;flex-direction:column-reverse;gap:20px;position:relative;z-index:999;}
.news-item {
    background: var(--glass-bg);border-radius:35px;border:1px solid var(--glass-border);
    box-shadow:var(--glass-shadow),inset 1px 1px 0 var(--glass-inset-light),inset -1px -1px 0 var(--glass-inset-dark);
    padding:25px;position:relative;z-index:9999;color:var(--color-text-main);margin-bottom:4px;width:100%;overflow:hidden;
    transition:all 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
    opacity: 0;
    will-change: transform, opacity;
    display:flex;justify-content:space-between;gap:20px;align-items:flex-start;
    backdrop-filter: blur(12px) saturate(180%) contrast(1.1);-webkit-backdrop-filter: blur(12px) saturate(180%) contrast(1.1);
}
/* å…¥åœºæ¿€æ´»æ ·å¼ - ä¸­é—´æ­£å¸¸ä½ç½® */
.news-item.active {
    transform: translate3d(0, 0, 0);
    opacity: 1;
}
/* ç¦»åœºæ ·å¼ - å³ä¸Šè§’æ¶ˆå¤± */
.news-item.out {
    opacity: 0;
}
.news-item:nth-child(even) {flex-direction: row;}
.news-item:nth-child(odd) {flex-direction: row-reverse;justify-content: space-between;}
/* å¥‡æ•°é¡¹ ç¦»åœº â†’ å‘å·¦æ»‘å‡ºå±å¹• */
.news-item.out:nth-child(odd) {
    transform: translate3d(-100%, 0, 0);
}
/* å¶æ•°é¡¹ ç¦»åœº â†’ å‘å³æ»‘å‡ºå±å¹• */
.news-item.out:nth-child(even) {
    transform: translate3d(100%, 0, 0);
}
.news-text-box {flex:0 0 60%;display:flex;flex-direction:column;justify-content:space-between;min-height:200px;}
.news-media-box {flex:0 0 35%;height:200px;border-radius:12px;overflow:hidden;border:1px solid rgba(56,161,105,0.08);box-shadow:0 3px 10px rgba(0,0,0,0.05);}
.news-item:hover {
    transform: translateY(-6px) scale(1.01) translateZ(0) rotate(0deg) !important;
    box-shadow:0 15px 35px rgba(0,0,0,0.12), 0 0 30px var(--hover-glow),inset 1px 1px 0 var(--glass-inset-light),inset -1px -1px 0 var(--glass-inset-dark);
    border-color: rgba(56,161,105,0.2);
    opacity: 1 !important;
}
.news-title {font-size:24px;color:var(--color-text-title)!important;font-weight:var(--font-weight-bold);margin-bottom:12px;letter-spacing:1px;cursor:pointer;transition: all 0.3s ease;}
.news-title:hover {color:var(--color-green)!important;}
.news-content {font-size:17px;color:var(--color-text-main)!important;line-height:1.9;font-weight:var(--font-weight-normal);}
.news-date {font-size:13px;color:var(--color-green);opacity:0.95;z-index:10;pointer-events:none;margin-top:auto;padding-top:10px;font-weight:var(--font-weight-light);}
.news-img-item, .news-video-item {width:100%;height:100%;object-fit:cover;object-position:center;cursor:pointer;transition:all 0.3s ease;display:block;}
.news-img-item:hover, .news-video-item:hover {transform:scale(1.03);box-shadow:0 0 12px var(--hover-glow);}
.news-loading {text-align:center;color:var(--color-green);padding:40px 20px;font-size:15px;}
.comment-area {margin-top:15px;padding-top:15px;border-top:1px solid rgba(255,255,255,0.08);width:100%;display:none;}
.comment-title {display:none;}
.utter-container {opacity:0;visibility:hidden;max-height:0;overflow:hidden;}
/* ========== æ ¸å¿ƒä¿®å¤ï¼šè‡ªå®šä¹‰æç¤ºå¼¹çª—æ ·å¼ã€ç»ç’ƒè´¨æ„Ÿï¼Œå®Œç¾åŒ¹é…é¡µé¢é£æ ¼ã€‘ ========== */
.tip-modal-mask {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    z-index: 99999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: all 0.4s cubic-bezier(0.34,1.56,0.64,1);
    padding: 20px 10px;
    box-sizing: border-box;
}
.tip-modal-mask.show {
    opacity: 1;
    pointer-events: all;
}
.tip-modal-box {
    width: 100%;
    max-width: 380px;
    padding: 25px 20px;
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 15px;
    transform: translateY(15px) scale(0.95);
    transition: all 0.4s cubic-bezier(0.34,1.56,0.64,1);
}
.tip-modal-mask.show .tip-modal-box {
    transform: translateY(0) scale(1);
}
.tip-modal-icon {
    font-size: 32px;
    color: #ffffff !important;
    font-weight: bold;
}
.tip-modal-text {
    font-size: 16px;
    color: rgba(255, 255, 255, 0.98) !important;
    text-align: center;
    font-weight: var(--font-weight-medium);
    line-height: 1.6;
}
.tip-modal-close-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: transparent;
    border: none;
    cursor: pointer;
    font-size: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.5s cubic-bezier(0.34,1.56,0.64,1);
    backdrop-filter: blur(8px) saturate(180%);
    -webkit-backdrop-filter: blur(8px) saturate(180%);
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow:0 2px 8px rgba(0,0,0,0.08),inset 1px 1px 0 rgba(255,255,255,0.1),inset -1px -1px 0 rgba(0,0,0,0.05);
    color: var(--color-green);
}
.tip-modal-close-btn:hover {
    background:rgba(56,161,105,0.15);
    color:#fff;
    transform:rotate(120deg) scale(1.1);
    box-shadow:0 0 15px var(--hover-glow);
    border-color:rgba(56,161,105,0.3);
}
.tip-modal-close-btn:active {
    transform: rotate(90deg) scale(var(--active-scale));
}

/* âœ…âœ…âœ… æ ¸å¿ƒä¿®æ”¹ï¼šå£çº¸å¼¹çª—æ ·å¼+ä¸€è¡Œ4ä¸ªå£çº¸+åˆ†ç±»æŒ‰é’®æ ·å¼ å®Œç¾é€‚é… */
#bgModalMask {
    padding: 20px !important;
    align-items: flex-start !important;
    overflow-y: auto !important;
}
#bgModalMask .tip-modal-box {
    padding: 15px !important;
    margin: 0 auto !important;
    margin-top: 15px !important;
    top: 0 !important;
    left: 0 !important;
    transform: none !important;
    width: 95% !important;
    max-width: 1200px !important;
    max-height: 90vh !important;
    overflow: hidden !important;
    box-sizing: border-box !important;
}
/* ç½®é¡¶æ ‡é¢˜æ +åˆ†ç±»æ ï¼Œæ°¸ä¸æ»šåŠ¨æ¶ˆå¤± */
#bgModalMask .tip-modal-box > div:first-child,
#bgModalMask .tip-modal-box > div:nth-child(2),
#bgModalMask .tip-modal-box > div:nth-child(3) {
    padding: -1px 0 8px 0 !important;
    margin: 0 !important;
    width: 100% !important;
}
/* æ¯ä¸ªå£çº¸ç¼©ç•¥å›¾ ä¸¥æ ¼åœ¨åˆ—è¡¨å†…ï¼Œä¸æŒ¤å‹ */
#bgThumbList .bg-thumb-item {
    width: 100% !important;
    height: 110px !important;
    margin: 0 !important;
    padding: 0 !important;
    border-radius: 10px !important;
    overflow: hidden !important;
    box-sizing: border-box !important;
}
#bgThumbList .bg-thumb-item img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    display: block !important;
}
/* âœ… æ ¸å¿ƒä¿®æ”¹ï¼šä¸€è¡Œå›ºå®šæ˜¾ç¤º4ä¸ªå£çº¸ï¼Œæ°¸è¿œä¸ä¼šå¤šä¸ä¼šå°‘ï¼Œå®Œç¾è§£å†³æ‹¥æŒ¤é—®é¢˜ */
#bgThumbList {
    width: 100% !important;
    height: auto !important;
    margin: 0px !important;
    padding: 0px !important;
    padding-top: 0 !important;
    display: grid !important;
    grid-template-columns: repeat(4, 1fr) !important;
    gap: 12px !important;
    overflow-x: hidden !important;
    overflow-y: auto !important;
    position: relative !important;
    top: 0 !important;
    left: 0 !important;
    max-height: calc(85vh - 120px) !important;
}
/* âœ… å£çº¸åˆ†ç±»åˆ‡æ¢æŒ‰é’®æ ·å¼ï¼Œå’Œä½ çš„é¡µé¢ç»¿è‰²ç»ç’ƒé£æ ¼å®Œç¾åŒ¹é… */
.bg-tab-group {
    display: flex;
    gap: 10px;
    margin: 8px 0 15px 0;
    width: 100%;
}
.bg-tab-btn {
    flex: 1;
    height: 38px;
    background: transparent;
    border: 1px solid var(--glass-border);
    border-radius: 10px;
    color: var(--color-text-sub);
    font-size: 15px;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.34,1.56,0.64,1);
    backdrop-filter: blur(10px) saturate(180%);
    -webkit-backdrop-filter: blur(10px) saturate(180%);
    font-weight: var(--font-weight-medium);
}
.bg-tab-btn.active {
    color: #fff !important;
    background: linear-gradient(145deg, rgba(56,161,105,0.2), rgba(45,139,105,0.15)) !important;
    border-color: rgba(56, 161, 105, 0.5) !important;
    font-weight: var(--font-weight-bold);
    box-shadow: 0 4px 15px var(--hover-glow);
}
.bg-tab-btn:hover:not(.active) {
    color: var(--color-green) !important;
    background: rgba(56, 161, 105, 0.08) !important;
    border-color: rgba(56,161,105,0.4) !important;
    box-shadow: 0 4px 12px var(--hover-glow);
}
.bg-thumb-item {
    width: 100% !important;
    height: 90px !important;
    border-radius: 10px !important;
    overflow: hidden !important;
    cursor: pointer !important;
    border: 2px solid transparent !important;
    transition: all 0.25s ease !important;
    position: relative !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
    background: rgba(0,0,0,0.1) !important;
}
.bg-thumb-item:hover {
    transform: scale(1.03) !important;
    box-shadow:0 0 15px var(--hover-glow) !important;
}
.bg-thumb-item.active {
    border-color:var(--color-green) !important;
    box-shadow:0 0 20px var(--hover-glow) !important;
}
.bg-thumb-item img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    object-position: center !important;
    display: block !important;
    opacity: 1 !important;
}
.bg-thumb-del {
    position:absolute;
    top:5px;
    right:5px;
    width:24px;
    height:24px;
    border-radius:50%;
    background:rgba(0,0,0,0.8);
    color:#fff;
    font-size:12px;
    display:flex;align-items:center;justify-content:center;
    cursor:pointer;
    opacity:0;
    transition:opacity 0.25s ease;
    z-index: 99;
}
.bg-thumb-item:hover .bg-thumb-del {
    opacity:1;
}
/* å…³é—­æŒ‰é’®ä¼˜åŒ–ï¼Œè¶…å¤§å·ï¼Œæ°¸ä¸é®æŒ¡ */
#bgModalCloseBtn {
    position: fixed !important;
    top: 15px !important;
    right: 15px !important;
    width: 45px !important;
    height: 45px !important;
    font-size: 20px !important;
    z-index: 9999999 !important;
}

.img-preview-mask {position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.95);z-index:10000;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity 0.4s cubic-bezier(0.16,1,0.3,1);}
.img-preview-mask.show {opacity:1;pointer-events:none;}
.preview-img, .preview-video {max-width:90vw;max-height:90vh;border-radius:8px;transform-origin:center center;transform:scale(0);transition:transform 0.4s cubic-bezier(0.34,1.56,0.64,1);display:none;object-fit:contain;margin:0 auto;}
.preview-img {z-index:10001;}
.preview-video {z-index:10001;background:#000;}
.img-preview-mask.show .preview-img, .img-preview-mask.show .preview-video {display:block;transform:scale(1);}

/* ========== æ–°é—»å¼¹çª— ========== */
.news-modal-mask {position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);z-index:9999;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity 0.4s cubic-bezier(0.16,1,0.3,1);padding:20px;box-sizing:border-box;}
.news-modal-mask.show {opacity:1;pointer-events:all;}
.news-modal-box {background:var(--glass-bg);border-radius:20px;border:1px solid var(--glass-border);box-shadow:0 12px 48px rgba(0,0,0,0.15),inset 1px 1px 0 var(--glass-inset-light),inset -1px -1px 0 var(--glass-inset-dark);width:100%;max-width:800px;max-height:calc(100vh - 40px);color:var(--color-text-main);position:relative;transform:translateY(20px);transition:transform 0.4s cubic-bezier(0.34,1.56,0.64,1),opacity 0.4s cubic-bezier(0.34,1.56,0.64,1);opacity:0;overflow-y:auto;overflow-x:hidden;margin:auto;backdrop-filter:blur(20px) saturate(180%) contrast(1.1);-webkit-backdrop-filter:blur(20px) saturate(180%) contrast(1.1);}
.news-modal-mask.show .news-modal-box {transform:translateY(0);opacity:1;}
.modal-close-btn {position:absolute;top:15px;right:15px;width:36px;height:36px;border-radius:50%;background:transparent;border:none;cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center;transition:all 0.5s cubic-bezier(0.34,1.56,0.64,1);z-index:9999;backdrop-filter:blur(8px) saturate(180%);-webkit-backdrop-filter:blur(8px) saturate(180%);border:1px solid rgba(255,255,255,0.08);box-shadow:0 2px 8px rgba(0,0,0,0.08),inset 1px 1px 0 rgba(255,255,255,0.1),inset -1px -1px 0 rgba(0,0,0,0.05);color:var(--color-green);}
.modal-close-btn:hover {background:rgba(56,161,105,0.15);color:#fff;transform:rotate(120deg) scale(1.2);box-shadow:0 0 15px var(--hover-glow);border-color:rgba(56,161,105,0.3);}
.modal-close-btn:active {transform: rotate(90deg) scale(var(--active-scale));}
.modal-news-content {padding:25px 30px;}
.modal-news-title {font-size:25px;color:var(--color-text-title);font-weight:var(--font-weight-bold);margin-bottom:15px;letter-spacing:1px;}
.modal-news-desc {font-size:17px;color:var(--color-text-main);line-height:1.9;margin-bottom:20px;font-weight:var(--font-weight-normal);}
.modal-news-imgs {display:flex;flex-wrap:wrap;gap:12px;margin-bottom:15px;}
.modal-news-img-item {width:calc(33.33% - 8px);height:180px;object-fit:cover;border-radius:8px;border:1px solid rgba(56,161,105,0.08);cursor:pointer;transition:all 0.3s ease;position:relative;}
.modal-news-img-item:hover {transform:scale(1.03);box-shadow:0 0 12px var(--hover-glow);}
.modal-news-date {font-size:12px;color:var(--color-text-sub);text-align:right;margin-bottom:20px;font-weight:var(--font-weight-light);}
.modal-comment-area {padding:0 30px 25px 30px;border-top:1px solid rgba(255,255,255,0.08);margin-top:10px;}
.modal-utter-container {width:100%!important;min-height:200px;max-height:400px;}
.modal-utter-container iframe {width:100%!important;border:0!important;min-height:200px!important;}
.news-modal-box::-webkit-scrollbar {display:none;}
.news-modal-box {-ms-overflow-style:none;scrollbar-width:none;}
.news-modal-box {color: #ffffff !important;}
.news-modal-box .modal-news-title,.news-modal-box .modal-news-desc,.news-modal-box .modal-news-date {color: #ffffff !important;}

/* ========== Footer ========== */
#footer {width:calc(100% - 40px);color:var(--color-text-sub);font-size:13px;border-top:1px solid var(--glass-border);background:var(--glass-bg);position:fixed;bottom:15px;left:50%;transform:translateX(-50%);z-index:98;display:flex;align-items:center;padding:15px 25px;border-radius:20px;margin:0 auto;backdrop-filter:blur(12px) saturate(180%) contrast(1.1);-webkit-backdrop-filter:blur(12px) saturate(180%) contrast(1.1);box-shadow:var(--glass-shadow),inset 1px 1px 0 var(--glass-inset-light),inset -1px -1px 0 var(--glass-inset-dark);height:auto;box-sizing:border-box;transition:all 0.3s ease;font-weight:var(--font-weight-light);}
#footer:hover {box-shadow:0 8px 25px rgba(0,0,0,0.08),0 0 15px var(--hover-glow);}
#footer a {color:var(--color-green);transition: color 0.2s ease;font-weight:var(--font-weight-medium);}
#footer a:hover {text-decoration:underline;color:var(--color-green-deep);}
.footer-right {display:flex;align-items:center;gap:8px;margin:0 auto;}

/* âœ… éŸ³ä¹æ’­æ”¾å™¨æŒ‰é’®ã€æ¶²æ€ç»ç’ƒåœ†å½¢é€šé€ç‰ˆã€‘æ ¸å¿ƒåŠ¨ç”»ä¼˜åŒ– */
.music-player {display:flex;align-items:center;gap:10px;position:absolute;left:30px;top:50%;transform:translateY(-50%);}
.music-btn {width:38px;height:38px;border-radius:50%;background:transparent;color:var(--color-green);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.5s cubic-bezier(0.34,1.56,0.64,1);font-size:0;position:relative;backdrop-filter:blur(8px) saturate(180%);-webkit-backdrop-filter:blur(8px) saturate(180%);border:1px solid rgba(255,255,255,0.08);box-shadow:0 3px 10px rgba(0,0,0,0.08),inset 1px 1px 0 rgba(255,255,255,0.1),inset -1px -1px 0 rgba(0,0,0,0.05);}
.music-btn:hover {background:var(--color-green-deep);color:#fff;transform:scale(1.2);border-color:var(--color-green-deep);box-shadow:0 0 20px var(--hover-glow);}
.music-btn:active {transform: scale(var(--active-scale));}
.play-icon::before {content:'';width:0;height:0;border-top:8px solid transparent;border-bottom:8px solid transparent;border-left:13px solid currentColor;margin-left:2px;}
.pause-icon::before {content:'';width:12px;height:14px;background:linear-gradient(to right, currentColor 0, currentColor 3px, transparent 3px, transparent 6px, currentColor 6px, currentColor 9px);}
.music-text {font-size:12px;color:var(--color-text-sub);font-weight:var(--font-weight-light);}
audio {display:none;}

/* âœ…âœ…âœ… è¿”å›é¡¶éƒ¨+ä¾§è¾¹å·¥å…·æŒ‰é’®ã€æ¶²æ€ç»ç’ƒåœ†å½¢é€šé€ç‰ˆã€‘ç»ˆæåŠ¨ç”»ä¼˜åŒ– */
.sidebar-top {position:fixed;bottom:90px;right:30px;z-index:99;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.5s cubic-bezier(0.34,1.56,0.64,1);border:1px solid var(--glass-border);background:transparent;backdrop-filter:blur(12px) saturate(180%);-webkit-backdrop-filter:blur(12px) saturate(180%);box-shadow:var(--glass-shadow),inset 1px 1px 0 var(--glass-inset-light),inset -1px -1px 0 var(--glass-inset-dark);color: var(--color-text-sub);}
.sidebar-top:hover {background:var(--color-green);color:#fff;transform:translateY(-6px) scale(1.2);box-shadow:0 0 25px var(--hover-glow);border-color: var(--color-green);}
.sidebar-top:active {transform: translateY(0) scale(var(--active-scale));}
.sidebar-tools {position:fixed;bottom:140px;right:30px;z-index:99;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.5s cubic-bezier(0.34,1.56,0.64,1);border:1px solid var(--glass-border);background:transparent;backdrop-filter:blur(12px) saturate(180%);-webkit-backdrop-filter:blur(12px) saturate(180%);font-size:18px;color: var(--color-text-sub);box-shadow:var(--glass-shadow),inset 1px 1px 0 var(--glass-inset-light),inset -1px -1px 0 var(--glass-inset-dark);}
.sidebar-tools:hover {background:var(--color-green);color:#fff;transform:translateY(-6px) scale(1.2);box-shadow:0 0 25px var(--hover-glow);border-color: var(--color-green);}
.sidebar-tools:active {transform: translateY(0) scale(var(--active-scale));}

/* æ»šåŠ¨æ¡æ ·å¼ - ç»¿è‰²é€‚é… */
::-webkit-scrollbar {width:8px;height:8px;}
::-webkit-scrollbar-track {background:var(--scrollbar-track);border-radius:10px;}
::-webkit-scrollbar-thumb {background:var(--scrollbar-thumb);border-radius:10px;transition:all 0.2s ease;}
::-webkit-scrollbar-thumb:hover {background:var(--color-green);}
::-webkit-scrollbar-thumb:active {background:var(--color-green-deep);}
.sidebar-wrap::-webkit-scrollbar { width: 6px; }

/* ========== å“åº”å¼è®¾è®¡ ========== */
@media (max-width: 1024px) {
    html, body {overflow-x:hidden!important;}
    .container-main {flex-direction:column;gap:30px;margin:20px auto;}
    #sidebar {position:static;width:100%;left:auto;top:auto;transform:none;margin-bottom:0;height:auto;}
    #content {width:100%;margin-left:0!important;padding:0!important;}
    .sidebar-wrap {max-height:none;overflow-y:visible;}
    .article-title {font-size:24px;}
    .main-nav-link-wrap {margin:0 6px;}
    .sidebar-top {bottom:80px;right:20px;}
    .sidebar-tools {bottom:130px;right:20px;}
    #footer {width:calc(100% - 30px);left:15px;bottom:10px;padding:12px 15px;height:auto;flex-wrap:wrap;gap:8px;justify-content:center;}
    .music-text {display:none;}
    .news-item {flex-direction:column;gap:15px;padding:20px;}
    .news-text-box {flex:1;min-height:auto;}
    .news-media-box {flex:1;width:100%;height:180px;}
    .news-title {font-size:20px;}
    .news-content {font-size:15px;}
    .github-login-btn, .user-name-display {border-radius:24px !important;padding:9px 18px !important;}
    .news-modal-box {max-width:100%;margin:20px 0;}
    .modal-news-img-item {width:calc(50% - 8px);height:150px;}
    .modal-news-content {padding:20px 18px;}
    .modal-comment-area {padding:0 18px 20px 18px;}
    .search-box-container {padding:0 5px;}
    .search-input {height:38px;font-size:14px;}
    .search-btn {height:38px;padding:0 25px;font-size:14px;justify-content:center;}
    .search-btn .iconfont {margin-right:6px;}
}
@media (max-width:768px) {
    .news-media-box {height:160px;}
    .modal-news-img-item {width:100%;height:200px;}
    .nav-center {flex-wrap:wrap;gap:8px;}
    #header-nav {width:calc(100% - 20px);margin:10px auto 0 auto;padding:10px 15px;}
}
/* é˜²æ­¢ä»»ä½•å…ƒç´ å¯¼è‡´æ°´å¹³æ»šåŠ¨æ¡ */
* {
    max-width: 100%;
    box-sizing: border-box;
}

/* ç¡®ä¿å›¾ç‰‡å’Œè§†é¢‘ä¸ä¼šæº¢å‡º */
img, video, iframe {
    max-width: 100%;
    height: auto;
}

/* ç¡®ä¿è¡¨æ ¼ä¸ä¼šæº¢å‡º */
table {
    max-width: 100%;
    overflow-x: auto;
    display: block;
}
    </style>
</head>
<body>
    <!-- ğŸ”¥ æ–°å¢ï¼šå¼€å±åŠ¨ç”» -->
    <div id="loader">
        <div class="loading-left-bg loading-bg"></div>
        <div class="loading-right-bg loading-bg"></div>
        <div class="spinner-box">
            <div class="loading-taichi rotate">
                <svg width="150" height="150" viewBox="0 0 1024 1024" class="icon" xmlns="https://www.w3.org/2000/svg">
                    <path d="M303.5 432A80 80 0 0 1 291.5 592A80 80 0 0 1 303.5 432z" />
                    <path d="M512 65A447 447 0 0 1 512 959L512 929A417 417 0 0 0 512 95A417 417 0 0 0 512 929L512 959A447 447 0 0 1 512 65z M512 95A417 417 0 0 1 929 512A208.5 208.5 0 0 1 720.5 720.5L720.5 592A80 80 0 0 0 720.5 432A80 80 0 0 0 720.5 592L720.5 720.5A208.5 208.5 0 0 1 512 512A208.5 208.5 0 0 0 303.5 303.5A208.5 208.5 0 0 0 95 512A417 417 0 0 1 512 95z" />
                </svg>
            </div>
            <div class="loading-word">æ˜¥å¤©æ˜¯å¥¹æœ€çˆ±çš„å­£èŠ‚...</div>
        </div>
    </div>

    <div class="container">
        <nav id="header-nav">
            <div class="theme-bg-switch-group">
                <label class="theme-switch-wrap">
                    <label class="theme-switch">
                        <input type="checkbox" id="themeToggle">
                        <span class="theme-slider"></span>
                    </label>
                </label>
                <div class="bg-switch-wrap">
                    <button class="bg-switch-btn" id="bgChangeBtn">
                        <i class="iconfont icon-refresh"></i>
                        åˆ‡æ¢èƒŒæ™¯
                    </button>
                </div>
            </div>
            <div class="nav-center">
                <span class="main-nav-link-wrap"><a class="main-nav-link active" href="index.html">é¦–é¡µ</a></span>
                <span class="main-nav-link-wrap"><a class="main-nav-link" href="moguone/tool.html">Toolå·¥å…·</a></span>
            </div>
        </nav>
        
        <div class="container-main">
            <aside id="sidebar">
                <div class="sidebar-wrap" data-aos="fade-up">
                    <div class="sidebar-author">
                        <img src="https://img.wjwj.top/2026/01/16/a27c17b713d7998cebb06b1dde372d64.jpg" alt="ä¸ªäººå¤´åƒ">
                        <div class="sidebar-author-name">Mo GuOne</div>
                        <div class="sidebar-description">çƒ­çˆ±æ˜¯æ‰€æœ‰çš„ç†ç”±å’Œç­”æ¡ˆ</div>
                    </div>
                    <div class="sidebar-social">
                        <a href="https://github.com/migolqn/moguwan" title="Github" target="_blank"><i class='social iconfont icon-github'></i></a>
                        <a href="https://www.zhihu.com/" title="çŸ¥ä¹" target="_blank"><i class='social iconfont icon-zhihu'></i></a>
                        <a href="mailto:2926197119@qq.com" title="é‚®ç®±"><i class='social iconfont icon-email'></i></a>
                    </div>
                    <div class="sidebar-menu">
					    <div class="sidebar-stat-wrap">
					        <div class="stat-item">
					            <div class="stat-num" id="totalCount">0</div>
					            <div class="stat-text">æ€»è®¿é—®é‡</div>
					        </div>
					    </div>
                        <div class="sidebar-update-log"><div class="update-log-title">ğŸ“Œ ç‰ˆæœ¬æ›´æ–°æ—¥å¿—</div></div>
                    </div>
                </div>
            </aside>
        
            <div id="content">
                <section id="main">
                    <article class="article-inner" data-aos="fade-up">
                        <h1 class="article-title" data-aos="slide-up">MY HOME</h1>
                        <p class="article-signature" data-aos="slide-up">
                            ä½ ä¼šä¸ä¼šå¿½ç„¶çš„å‡ºç°ï¼Œåœ¨è¡—è§’çš„å’–å•¡åº—ã€‚<strong>â€”é™ˆå¥•è¿… ã€Šå¥½ä¹…ä¸è§ã€‹</strong><br> 
                            <p class="article-signature" data-aos="slide-up">
                                ç‚¹å‡»ä¸‹æ–¹çš„å¤§æ ‡é¢˜å¯ä»¥æ‰“å¼€è¯¦æƒ…é¡µä»¥åŠæŸ¥çœ‹å‘è¡¨è¯„è®º,è¯„è®ºåŠ è½½æœ‰ç‚¹æ…¢ è¯·è€å¿ƒç­‰å¾…ğŸ˜„<br>
                            </p>
                        </p>
						<div class="search-box-container">
						    <input type="text" class="search-input" id="searchInput" placeholder="æœç´¢æ–°é—»æ ‡é¢˜/å†…å®¹å…³é”®è¯...">
						    <button class="search-btn" id="searchBtn"><i class="iconfont icon-search"></i> æœç´¢</button>
						    <button class="search-btn" id="resetBtn"><i class="iconfont icon-close"></i> é‡ç½®</button>
						</div>
                    </article>
                    <div class="news-container" id="newsScroll"></div>
                </section>
            </div>
        </div>
    </div>

    <footer id="footer">
        <div class="music-player">
            <div class="music-btn play-icon" id="playBtn"></div>
            <div class="music-text">Top Barry - ä¸€åŠä¸€åŠ</div>
            <audio id="music" loop preload="auto">
                <source src="moguone/song/ä¸€åŠä¸€åŠ.mp3" type="audio/mpeg">
            </audio>
        </div>
        <div class="footer-right">
            <span>Copyright Â©2026 - 2027 MY HOME. All rights reserved.</span>
            <a href="https://wj.qq.com/s2/25528684/0be2/" target="_blank"> å»ºè®®æˆ–æ„è§ç‚¹æˆ‘ğŸ§2926197119</a>
        </div>
    </footer>
    
    <div class="sidebar-top" id="sidebarTop">
        <div class="arrow-up">â†‘</div>
    </div>
    
    <!-- æ–°å¢ï¼šè‡ªå®šä¹‰æç¤ºå¼¹çª—ã€ç»ç’ƒè´¨æ„Ÿï¼Œå’Œé¡µé¢é£æ ¼ç»Ÿä¸€ã€‘ -->
    <div class="tip-modal-mask" id="tipModalMask">
        <div class="tip-modal-box glass-effect">
            <button class="tip-modal-close-btn" id="tipModalCloseBtn">âœ•</button>
            <div class="tip-modal-icon">!</div>
            <div class="tip-modal-text">è¯·è¾“å…¥æœç´¢å…³é”®è¯</div>
        </div>
    </div>
    
    <div class="img-preview-mask" id="imgPreviewMask">
        <img src="" alt="é¢„è§ˆå›¾ç‰‡" class="preview-img" id="previewImg">
        <video class="preview-video" id="previewVideo" controls playsinline webkit-playsinline x5-playsinline preload="auto"></video>
    </div>
	<div class="tip-modal-mask" id="bgModalMask">
	    <button class="tip-modal-close-btn" id="bgModalCloseBtn">âœ•</button>
	    <div class="tip-modal-box glass-effect">
	        <div style="font-size:18px; font-weight:bold; color:var(--color-green); margin-bottom:10px;">å£çº¸é€‰æ‹©ä¸­å¿ƒ âœ¨</div>
	        <!-- âœ… æ–°å¢ï¼šå£çº¸åˆ†ç±»åˆ‡æ¢æŒ‰é’®ã€æˆ‘çš„å£çº¸ é»˜è®¤é€‰ä¸­ã€‘ã€å®˜æ–¹å£çº¸ã€‘ -->
	        <div class="bg-tab-group">
	            <button class="bg-tab-btn active" id="customBgTab">æˆ‘çš„å£çº¸ (è‡ªå®šä¹‰)</button>
	            <button class="bg-tab-btn" id="officialBgTab">å®˜æ–¹å£çº¸</button>
	        </div>
	        <div style="display:flex;gap:10px;margin-bottom:10px;flex-wrap: wrap;">
	            <button class="search-btn" id="addBgBtn" style="padding:0 20px;">+ è‡ªå®šä¹‰æ·»åŠ å£çº¸</button>
	            <input type="file" id="bgFileInput" accept="image/jpg,image/png,image/webp" style="display:none;">
	            <span style="font-size:12px;color:var(--color-text-sub);margin:auto 0;">æ”¯æŒJPG/PNG/WEBPï¼Œå›¾ç‰‡è‡ªåŠ¨æ°¸ä¹…ä¿å­˜</span>
	        </div>
	        <div id="bgThumbList"></div>
	    </div>
	</div>
    <div class="news-modal-mask" id="newsModalMask">
        <div class="news-modal-box">
            <button class="modal-close-btn" id="modalCloseBtn">âœ•</button>
            <div class="modal-news-content" id="modalNewsContent"></div>
            <div class="modal-comment-area" id="modalCommentArea"></div>
        </div>
    </div>

    <script type="text/javascript">
	// ====== å£çº¸æ ¸å¿ƒå˜é‡ã€å…¨å±€ç½®é¡¶ï¼Œä¼˜å…ˆåˆå§‹åŒ–ã€‘======
	let bgUrlList = []; // å®˜æ–¹å£çº¸åˆ—è¡¨
	let customBgList = []; // æˆ‘çš„å£çº¸(è‡ªå®šä¹‰)åˆ—è¡¨
	let allBgList = []; // â˜…â˜…â˜… å¿…åŠ ï¼šå…¨å±€å£°æ˜æ€»å£çº¸åˆ—è¡¨ï¼Œè§£å†³è‡ªå®šä¹‰å£çº¸ä¸¢å¤±æ ¸å¿ƒé—®é¢˜
	const BG_CUSTOM_KEY = 'custom_bg_list';
	const BG_INDEX_KEY = 'saveBgIndex';
	let currentBgTab = 'custom'; // âœ… æ–°å¢ï¼šå½“å‰é€‰ä¸­çš„åˆ†ç±»ï¼Œé»˜è®¤custom(æˆ‘çš„å£çº¸)
	let isAnimating = false;
	let imgObserver = null;
	let videoObserver = null;
	let newsDataList = [];
	let currentModalIndex = -1;
	let scrollTopVal = 0;
	let newsAnimateObserver = null;
	const GITHUB_REPO = "moguwan/moguwan.github.io";
    // âœ…âœ…âœ… ä¿®å¤æ ¸å¿ƒ1ï¼šä¼˜å…ˆåˆå§‹åŒ–æœ¬åœ°å£çº¸ç¼“å­˜ï¼Œä¿è¯åˆ·æ–°ä¸ä¸¢å¤±ã€æœ€ç»ˆä¿®å¤ç‰ˆã€‘
    function initCustomBg() {
        try {
            const saveCustomBg = localStorage.getItem(BG_CUSTOM_KEY);
            // è¯»å–æœ¬åœ°ç¼“å­˜+å®¹é”™ï¼Œä¸ä¼šæ¸…ç©ºåŸæœ‰å£çº¸
            customBgList = saveCustomBg ? JSON.parse(saveCustomBg) : [];
            // åˆå§‹åŒ–å°±æ‹¼æ¥å®Œæ•´åˆ—è¡¨ï¼Œä¿è¯ä»»ä½•æ—¶å€™éƒ½èƒ½è¯»åˆ°è‡ªå®šä¹‰å£çº¸
            allBgList = [...bgUrlList, ...customBgList];
        } catch (e) {
            console.log('è¯»å–è‡ªå®šä¹‰å£çº¸ç¼“å­˜å®¹é”™', e);
            customBgList = [];
            allBgList = [...bgUrlList];
            localStorage.setItem(BG_CUSTOM_KEY, JSON.stringify([]));
        }
    }

    // âœ…âœ…âœ… æ ¸å¿ƒä¿®æ”¹ï¼šæ¸²æŸ“å£çº¸åˆ—è¡¨ï¼Œæ”¯æŒã€æˆ‘çš„å£çº¸/å®˜æ–¹å£çº¸ã€‘åˆ†ç±»æ¸²æŸ“
    function renderBgThumbnails(renderList) {
        const bgThumbList = document.getElementById('bgThumbList');
        bgThumbList.innerHTML = '';
        const saveBgIndex = Number(localStorage.getItem(BG_INDEX_KEY)) || 0;
        // åŒºåˆ†æ˜¯å®˜æ–¹å£çº¸è¿˜æ˜¯æˆ‘çš„å£çº¸ï¼Œç”Ÿæˆå¯¹åº”çš„ç´¢å¼•
        renderList.forEach((bgUrl, showIndex) => {
            let realIndex = 0;
            if(currentBgTab === 'custom'){
                realIndex = bgUrlList.length + showIndex; // æˆ‘çš„å£çº¸çš„çœŸå®ç´¢å¼•
            }else{
                realIndex = showIndex; // å®˜æ–¹å£çº¸çš„çœŸå®ç´¢å¼•
            }
            const isBuiltIn = currentBgTab === 'official';
            const item = document.createElement('div');
            item.className = `bg-thumb-item ${realIndex == saveBgIndex ? 'active' : ''}`;
            item.innerHTML = `
                <img src="${bgUrl}" alt="å£çº¸${showIndex+1}" style="width:100%;height:100%;object-fit:cover;">
                ${!isBuiltIn ? '<div class="bg-thumb-del" data-index="'+showIndex+'">âœ•</div>' : ''}
            `;
            // ç‚¹å‡»å£çº¸åº”ç”¨èƒŒæ™¯
            item.addEventListener('click', () => {
                applyBg(bgUrl, realIndex);
                document.querySelectorAll('.bg-thumb-item').forEach(el => el.classList.remove('active'));
                item.classList.add('active');
            });
            bgThumbList.appendChild(item);
        });
        // åˆ é™¤æˆ‘çš„å£çº¸é€»è¾‘
        document.querySelectorAll('.bg-thumb-del').forEach(delBtn => {
            delBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                const delIndex = parseInt(delBtn.dataset.index);
                if(delIndex >=0 && delIndex < customBgList.length){
                    customBgList.splice(delIndex, 1);
                    localStorage.setItem(BG_CUSTOM_KEY, JSON.stringify(customBgList));
                    renderBgThumbnails(customBgList); // åˆ é™¤ååˆ·æ–°æˆ‘çš„å£çº¸åˆ—è¡¨
                }
            });
        });
        // æ‰“å¼€å¼¹çª—å¼ºåˆ¶æ»šåŠ¨åˆ°é¡¶éƒ¨
        bgThumbList.scrollTop = 0;
    }

    // åº”ç”¨å£çº¸+æ°¸ä¹…ä¿å­˜ç´¢å¼•ï¼Œé€‰ä¸­å³æ°¸ä¹…ç”Ÿæ•ˆ
    function applyBg(bgUrl, index) {
        document.body.style.background = `url(${bgUrl}) no-repeat fixed center center`;
        document.body.style.backgroundSize = "cover";
        document.body.style.backgroundAttachment = "fixed";
        document.body.style.backgroundPosition = "center center";
        document.body.style.transition = "background 1.5s ease-in-out";
        // â˜…â˜…â˜… å¼ºåˆ¶å†™å…¥æœ¬åœ°å­˜å‚¨ï¼Œæ°¸ä¹…ä¿å­˜ï¼Œåˆ·æ–°ä¸ä¸¢
        localStorage.setItem(BG_INDEX_KEY, index);
        // â˜…â˜…â˜… åŒæ­¥æ›´æ–°å…¨å±€åˆ—è¡¨ï¼Œé˜²æ­¢ç´¢å¼•é”™ä½
        allBgList = [...bgUrlList, ...customBgList];
    }

function openBgModal() {
    document.getElementById('bgModalMask').classList.add('show');
    document.body.style.overflow = 'hidden';
    // âœ… æ ¸å¿ƒä¼˜åŒ–ï¼šé»˜è®¤é€‰ä¸­ã€æˆ‘çš„å£çº¸ã€‘ï¼Œåªæ¸²æŸ“è‡ªå®šä¹‰å£çº¸ï¼Œç§’å¼€ä¸å¡é¡¿
    currentBgTab = 'custom';
    document.getElementById('customBgTab').classList.add('active');
    document.getElementById('officialBgTab').classList.remove('active');
    renderBgThumbnails(customBgList);
    // âœ… å¼ºåˆ¶æ»šåŠ¨åˆ°é¡¶éƒ¨ï¼Œæ‰“å¼€å¼¹çª—å°±çœ‹åˆ°ç¬¬ä¸€è¡Œå£çº¸
    document.querySelector('#bgThumbList').scrollTop = 0;
    // ========== æ–°å¢ï¼šå¼ºåˆ¶é«˜äº®é€‰ä¸­çš„å£çº¸ ==========
    const saveBgIndex = Number(localStorage.getItem(BG_INDEX_KEY)) || 0;
    document.querySelectorAll('.bg-thumb-item').forEach((el,index) => {
        let realIndex = currentBgTab === 'custom' ? (bgUrlList.length + index) : index;
        if(realIndex === saveBgIndex) el.classList.add('active');
        else el.classList.remove('active');
    });
}
	function closeBgModal() {
	    document.getElementById('bgModalMask').classList.remove('show');
	    document.body.style.overflow = 'auto';
	}

    // âœ…âœ…âœ… ä¿®å¤æ ¸å¿ƒ5ï¼šè‡ªå®šä¹‰å£çº¸æ·»åŠ +æ°¸ä¹…ä¿å­˜ï¼Œæ— ä¸¢å¤±ã€å·²ä¿®å¤ï¼šæ·»åŠ åç«‹å³åˆ·æ–°åˆ—è¡¨ï¼Œè¡¥å…¨å®¹é”™ã€‘
    function initAddBgFunc() {
        const addBgBtn = document.getElementById('addBgBtn');
        const bgFileInput = document.getElementById('bgFileInput');
        addBgBtn.addEventListener('click', () => bgFileInput.click());
        bgFileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if(!file) return;
            // è¿‡æ»¤éå›¾ç‰‡æ–‡ä»¶
            if(!file.type.includes('image')){
                alert('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼æ”¯æŒJPG/PNG/WEBP');
                bgFileInput.value = '';
                return;
            }
            const reader = new FileReader();
            reader.onload = (e) => {
                const base64Url = e.target.result;
                customBgList.push(base64Url);
                // ä¿å­˜åˆ°æœ¬åœ°ç¼“å­˜
                localStorage.setItem(BG_CUSTOM_KEY, JSON.stringify(customBgList));
                // âœ…æ ¸å¿ƒä¿®å¤ï¼šæ·»åŠ æˆåŠŸåï¼Œç«‹å³é‡æ–°æ‹¼æ¥åˆ—è¡¨+åˆ·æ–°ç¼©ç•¥å›¾ï¼Œä¸ç”¨å…³é—­å¼¹çª—ï¼Œç«‹åˆ»çœ‹åˆ°æ–°å£çº¸
                allBgList = [...bgUrlList, ...customBgList];
                // æ·»åŠ å£çº¸åï¼Œé»˜è®¤åˆ‡å›æˆ‘çš„å£çº¸å¹¶åˆ·æ–°
                currentBgTab = 'custom';
                document.getElementById('customBgTab').classList.add('active');
                document.getElementById('officialBgTab').classList.remove('active');
                renderBgThumbnails(customBgList);
                bgFileInput.value = ''; // æ¸…ç©ºæ–‡ä»¶é€‰æ‹©å™¨ï¼Œå¯é‡å¤é€‰æ‹©åŒä¸€å¼ 
            };
            reader.readAsDataURL(file);
        });
    }
	// âœ…âœ…âœ… æ–°å¢ï¼šå£çº¸åˆ†ç±»åˆ‡æ¢æŒ‰é’®ç»‘å®šäº‹ä»¶
	function initBgTabSwitch() {
	    const customTab = document.getElementById('customBgTab');
	    const officialTab = document.getElementById('officialBgTab');
	    // åˆ‡æ¢åˆ°ã€æˆ‘çš„å£çº¸ã€‘
	    customTab.addEventListener('click', () => {
	        currentBgTab = 'custom';
	        customTab.classList.add('active');
	        officialTab.classList.remove('active');
	        renderBgThumbnails(customBgList); // åªæ¸²æŸ“è‡ªå®šä¹‰å£çº¸
	    });
	    // åˆ‡æ¢åˆ°ã€å®˜æ–¹å£çº¸ã€‘
	    officialTab.addEventListener('click', () => {
	        currentBgTab = 'official';
	        officialTab.classList.add('active');
	        customTab.classList.remove('active');
	        renderBgThumbnails(bgUrlList); // æ¸²æŸ“å®˜æ–¹å£çº¸
	    });
	}
	// åˆå§‹åŒ–åˆ†ç±»åˆ‡æ¢
	initBgTabSwitch();

// åˆå§‹åŒ–èƒŒæ™¯ã€è¯»å–ä¸Šæ¬¡ä¿å­˜çš„å£çº¸+å†…ç½®å£çº¸ã€‘ã€å½»åº•ä¿®å¤åˆ·æ–°ä¸¢å¤±ï¼Œæ°¸ä¹…ä¿å­˜ã€‘
async function initRandomBg() {
    try {
        const res = await fetch('moguone/background.txt');
        const bgText = await res.text();
        bgUrlList = bgText.replace(/\r\n/g, '\n').split('\n').map(line => line.trim()).filter(line => line);
    } catch (err) { 
        console.log('èƒŒæ™¯åˆ—è¡¨åŠ è½½å¤±è´¥', err); 
        bgUrlList = []; 
    }
    // â˜…â˜…â˜… å¼ºåˆ¶æ‹¼æ¥ï¼šå†…ç½®å£çº¸ + è‡ªå®šä¹‰å£çº¸ï¼Œä¼˜å…ˆçº§æœ€é«˜ï¼Œæ°¸ä¸ä¸¢å¤±
    allBgList = [...bgUrlList, ...customBgList];
    // â˜…â˜…â˜… å¼ºåˆ¶è¯»å–æœ¬åœ°ä¿å­˜çš„å£çº¸ç´¢å¼•ï¼Œå½»åº•å®¹é”™ï¼Œä¸ä¼šä¸ºç©ºã€ä¸ä¼šè¶Šç•Œ
    let saveBgIndex = localStorage.getItem(BG_INDEX_KEY);
    let useBgIndex = 0;
    // å®¹é”™å¤„ç†ï¼šå¦‚æœè¯»å–åˆ°ç´¢å¼•ã€ä¸æ˜¯ç©ºã€æ˜¯æ•°å­—ã€åœ¨åˆæ³•èŒƒå›´å†…ï¼Œå°±ç”¨è¿™ä¸ªç´¢å¼•
    if(saveBgIndex !== null && saveBgIndex !== '' && !isNaN(saveBgIndex)){
        useBgIndex = parseInt(saveBgIndex);
        if(useBgIndex <0 || useBgIndex >= allBgList.length){
            useBgIndex = allBgList.length - 1 < 0 ? 0 : allBgList.length -1;
        }
    }
    // â˜…â˜…â˜… åº”ç”¨å£çº¸ + å›ºåŒ–æ ·å¼ï¼Œæ°¸ä¸é”™ä½ã€æ°¸ä¸ç©ºç™½ã€ç«‹å³ç”Ÿæ•ˆ
    const useBg = allBgList[useBgIndex] || "";
    if(useBg){
        document.body.style.background = `url(${useBg}) no-repeat fixed center center`;
        document.body.style.backgroundSize = "cover";
        document.body.style.backgroundAttachment = "fixed";
        document.body.style.backgroundPosition = "center center";
    }else{
        document.body.style.background = "#151823";
    }
    document.body.style.transition = "background 1.5s ease-in-out";
}

	function changeRandomBg() {
	    openBgModal();
	}

	// å¯¼èˆªé“¾æ¥ç‚¹å‡»å¤„ç†
	const navLinks = document.querySelectorAll('.main-nav-link');
	navLinks.forEach(link => {
	    link.addEventListener('click', function(e) {
	        if (this.classList.contains('active')) return;
	        e.preventDefault();
	        const targetHref = this.getAttribute('href');
	        if (isAnimating || !targetHref) return;
	        
	        isAnimating = true;
	        const loader = document.getElementById('loader');
	        loader.classList.remove('loaded');
	        document.body.style.overflow = 'hidden';
	        
	        if (window.saveMusicState) saveMusicState();
	        
	        setTimeout(() => {
	            window.location.href = targetHref;
	            isAnimating = false;
	        }, 600);
	        
	        setTimeout(() => isAnimating = false, 1000);
	    });
	});

	function getUtterancesTheme() {
	    return document.documentElement.getAttribute('data-theme-mode') === 'dark' ? 'github-dark' : 'github-light';
	}

	// å›¾ç‰‡æ‡’åŠ è½½
	function initLazyImgLoad() {
	    const lazyElements = document.querySelectorAll('img[data-src]');
	    
	    if (!imgObserver) {
	        imgObserver = new IntersectionObserver((entries) => {
	            entries.forEach(entry => {
	                if (entry.isIntersecting) {
	                    const el = entry.target;
	                    el.src = el.dataset.src;
	                    el.onload = () => { el.classList.add('loaded'); };
	                    imgObserver.unobserve(el);
	                }
	            });
	        }, { rootMargin: '0px 0px 150px 0px', threshold: 0.1 });
	    }
	    
	    lazyElements.forEach(el => {
	        if (!el.classList.contains('loaded')) imgObserver.observe(el);
	    });
	}

	// è§†é¢‘æ‚¬æµ®é¢„è§ˆ
	function initVideoHoverPreview() {
	    const videos = document.querySelectorAll('video[data-src]');
	    
	    if (!videoObserver) {
	        videoObserver = new IntersectionObserver((entries) => {
	            entries.forEach(entry => {
	                if (entry.isIntersecting) {
	                    const video = entry.target;
	                    video.src = video.dataset.src;
	                    video.muted = true;
	                    video.loop = false;
	                    video.load();
	                    video.classList.add('loaded');
	                    video.onloadeddata = function() { video.play(); }
	                    video.ontimeupdate = function() {
	                        if (video.currentTime >=3) {video.currentTime=0;video.play();}
	                    }
	                    videoObserver.unobserve(video);
	                }
	            });
	        }, { rootMargin: '0px 0px 200px 0px', threshold:0.1 });
	    }
	    
	    videos.forEach(video => {
	        if (!video.classList.contains('loaded')) videoObserver.observe(video);
	    });
	}
	// ====================== äº‘ç«¯ç»Ÿè®¡æ ¸å¿ƒã€ä»…ä¿ç•™æ€»è®¿é—®é‡ã€‘ start ======================
	function formatVisitCount(num) {
	    if (num >= 1000) {
	        return (num / 1000).toFixed(2) + 'K';
	    } else {
	        return num;
	    }
	}
	const COUNT_ISSUE_ID = 7;
	const GITHUB_TOKEN = "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";
	const GITHUB_API = `https://api.github.com/repos/${GITHUB_REPO}/issues/${COUNT_ISSUE_ID}`;
	
	async function initVisitCount() {
	    // åªåˆå§‹åŒ–æ€»è®¿é—®é‡
	    let countData = { total: 0 };
	
	    try {
	        const res = await fetch(GITHUB_API, {
	            headers: { 'Authorization': `Bearer ${GITHUB_TOKEN}` }
	        });
	        const issueData = await res.json();
	
	        if (res.ok && issueData.body) {
	            // åªåŒ¹é…æ€»è®¿é—®é‡
	            const dataMatch = issueData.body.match(/æ€»è®¿é—®é‡ï¼š(\d+)/);
	            if (dataMatch) {
	                countData.total = parseInt(dataMatch[1]) || 0;
	            }
	        }
	
	        // æ€»è®¿é—®é‡ +1
	        countData.total += 1;
	
	        // æäº¤åˆ°äº‘ç«¯ä¿å­˜ï¼ˆåªå­˜æ€»è®¿é—®é‡ï¼‰
	        await fetch(GITHUB_API, {
	            method: 'PATCH',
	            headers: {
	                'Content-Type': 'application/json',
	                'Authorization': `Bearer ${GITHUB_TOKEN}`
	            },
	            body: JSON.stringify({
	                title: 'ğŸ“Š ç½‘ç«™è®¿é—®é‡ç»Ÿè®¡æ•°æ®ä¸“ç”¨',
	                body: `æ€»è®¿é—®é‡ï¼š${countData.total}`
	            })
	        });
	
	        // æ¸²æŸ“åˆ°é¡µé¢
	        document.getElementById('totalCount').innerText = formatVisitCount(countData.total);
	
	    } catch (err) {
	        // ç¦»çº¿å¤‡ç”¨é€»è¾‘ï¼šåªç¼“å­˜æ€»è®¿é—®é‡
	        let localData = JSON.parse(localStorage.getItem('temp_count_all')) || { total: 0 };
	        localData.total += 1;
	        localStorage.setItem('temp_count_all', JSON.stringify(localData));
	        document.getElementById('totalCount').innerText = formatVisitCount(localData.total);
	    }
	}
	// ====================== äº‘ç«¯ç»Ÿè®¡æ ¸å¿ƒ end ======================
	// ä¸»é¢˜åˆå§‹åŒ–
	function initTheme() {
	    const themeToggle = document.getElementById('themeToggle');
	    const htmlDom = document.documentElement;
	    const savedTheme = localStorage.getItem('theme_mode');
	    if(savedTheme==='light'){
	        htmlDom.setAttribute('data-theme-mode','light');
	        themeToggle.checked = true;
	    } else {
	        htmlDom.setAttribute('data-theme-mode','dark');
	        themeToggle.checked = false;
	    }
	    updateUtterancesTheme();
	    
	    themeToggle.addEventListener('change', function() {
	        if(this.checked){
	            htmlDom.setAttribute('data-theme-mode','light');
	            localStorage.setItem('theme_mode','light');
	        } else {
	            htmlDom.setAttribute('data-theme-mode','dark');
	            localStorage.setItem('theme_mode','dark');
	        }
	        updateUtterancesTheme();
	    });
	}

	function updateUtterancesTheme() {
	    const iframes = document.querySelectorAll('.utterances iframe, .modal-utter-container iframe');
    const theme = getUtterancesTheme();
    iframes.forEach(iframe => {
        if (iframe.contentWindow) {
            iframe.contentWindow.postMessage({type:'set-theme',theme:theme},'https://utteranc.es');
        }
    });
}

// åˆ›å»ºè¯„è®ºåŒº
function createCommentArea(newsItem, index) {
    const commentArea = document.createElement('div');
    commentArea.className='comment-area';
    const utterContainer = document.createElement('div');
    utterContainer.id=`utter_container_${index}`;
    utterContainer.className='utter-container';
    commentArea.appendChild(utterContainer);
    newsItem.appendChild(commentArea);
    const utterScript = document.createElement('script');
    utterScript.src='https://utteranc.es/client.js';
    utterScript.setAttribute('repo',GITHUB_REPO);
    utterScript.setAttribute('issue-term',`news_${index}`);
    utterScript.setAttribute('theme',getUtterancesTheme());
    utterScript.setAttribute('crossorigin','anonymous');
    utterScript.setAttribute('async',true);
    utterContainer.appendChild(utterScript);
}

// æ‰“å¼€æ–°é—»å¼¹çª—
function openNewsModal(index) {
    currentModalIndex = index;
    const newsData = newsDataList[index];
    const modalContent = document.getElementById('modalNewsContent');
    let imgHtml = '';
    if(newsData.imgSrcList.length>0||newsData.videoSrcList.length>0) {
        imgHtml = `<div class="modal-news-imgs">`;
        newsData.imgSrcList.forEach(url=>{
            imgHtml+=`<img class="modal-news-img-item" data-src="${url}" alt="${newsData.title}" src="">`;
        });
        newsData.videoSrcList.forEach(url=>{
            imgHtml+=`<video class="modal-news-img-item" tag="video" data-src="${url}" muted playsinline preload="metadata"></video>`;
        });
        imgHtml += `</div>`;
    }
    modalContent.innerHTML = `
        <div class="modal-news-title">${newsData.title}</div>
        <div class="modal-news-desc">${newsData.content}</div>
        ${imgHtml}
        <div class="modal-news-date">å‘å¸ƒæ—¶é—´ï¼š${newsData.date}</div>
    `;
    createModalCommentArea(index);
    const modalMask = document.getElementById('newsModalMask');
    modalMask.classList.add('show');
    scrollTopVal=window.scrollY;
    document.body.style.overflow='hidden';
    setTimeout(()=>{
        initPreviewAnimation();
        initLazyImgLoad();
        initVideoHoverPreview();
    },100);
}

function createModalCommentArea(index) {
    const modalCommentArea = document.getElementById('modalCommentArea');
    modalCommentArea.innerHTML = '';
    const utterContainer = document.createElement('div');
    utterContainer.className='modal-utter-container';
    modalCommentArea.appendChild(utterContainer);
    const utterScript = document.createElement('script');
    utterScript.src='https://utteranc.es/client.js';
    utterScript.setAttribute('repo',GITHUB_REPO);
    utterScript.setAttribute('issue-term',`news_${index}`);
    utterScript.setAttribute('theme',getUtterancesTheme());
    utterScript.setAttribute('crossorigin','anonymous');
    utterScript.setAttribute('async',true);
    utterContainer.appendChild(utterScript);
}

function closeNewsModal() {
    const modalMask = document.getElementById('newsModalMask');
    modalMask.classList.remove('show');
    document.body.style.overflow='auto';
    window.scrollTo(0,scrollTopVal);
    currentModalIndex=-1;
    document.querySelectorAll('.modal-news-img-item[tag=video]').forEach(v=>v.pause());
}

// è‡ªå®šä¹‰æç¤ºå¼¹çª—
function showTipModal() {
    const tipMask = document.getElementById('tipModalMask');
    tipMask.classList.add('show');
    document.body.style.overflow = 'hidden';
}

function hideTipModal() {
    const tipMask = document.getElementById('tipModalMask');
    tipMask.classList.remove('show');
    document.body.style.overflow = 'auto';
}

// æ–°é—»åŠ¨ç”» â†’ æ”¹ä¸ºã€æ—¥è®°åŠ¨ç”»ã€‘
function initNewsScrollAnimation() {
    const newsItems = document.querySelectorAll('.news-item');
    if (newsAnimateObserver) {
        newsAnimateObserver.disconnect();
        newsAnimateObserver = null;
    }
    
    newsAnimateObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            const newsItem = entry.target;
            if (entry.isIntersecting) {
                newsItem.classList.add('active');
                newsItem.classList.remove('out');
            } else {
                newsItem.classList.add('out');
                newsItem.classList.remove('active');
            }
        });
    }, {
        root: null,
        rootMargin: "0px 0px 100px 0px", // âœ… ä¿®æ”¹è¿™é‡Œå³å¯ï¼Œå…¶ä»–ä¸å˜
        threshold: 0.05
    });
    
    newsItems.forEach(item => {
        newsAnimateObserver.observe(item);
    });
}

// æ¸²æŸ“æ–°é—»åˆ—è¡¨
function renderNewsList(newsList) {
    const newsContainer = document.getElementById('newsScroll');
    newsContainer.innerHTML = '';
    if(newsList.length === 0) {
        newsContainer.innerHTML = '<div class="search-empty-tips">ğŸ” æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å†…å®¹ï¼Œè¯•è¯•æ¢ä¸ªå…³é”®è¯å§</div>';
        return;
    }
    const resourcesToLoad = [];
    newsList.forEach((newsData) => {
        const originalIndex = newsDataList.indexOf(newsData);
        const item = document.createElement('div');
        item.className='news-item';
        let mediaHtml = '';
        let firstMedia = null;
        if(newsData.imgSrcList.length>0){
            firstMedia={type:'image',url:newsData.imgSrcList[0]};
            mediaHtml = `<img class="news-img-item" data-src="${firstMedia.url}" alt="${newsData.title}" src="">`;
        }else if(newsData.videoSrcList.length>0){
            firstMedia={type:'video',url:newsData.videoSrcList[0]};
            mediaHtml = `<video class="news-video-item" tag="video" data-src="${firstMedia.url}" muted playsinline preload="metadata"></video>`;
        }
        item.innerHTML = `
            <div class="news-text-box">
                <div class="news-title">${newsData.title}</div>
                <div class="news-content">${newsData.content}</div>
                <div class="news-date">ğŸ“… ${newsData.date}</div>
            </div>
            <div class="news-media-box">${mediaHtml}</div>
        `;
        newsContainer.appendChild(item);
        createCommentArea(item, originalIndex);
        const newsTitleEl = item.querySelector('.news-title');
        newsTitleEl.addEventListener('click',()=>openNewsModal(originalIndex));
        if(firstMedia) resourcesToLoad.push(firstMedia);
    });
    Promise.all(resourcesToLoad.map(resource=>{
        return new Promise((resolveLoad)=>{
            if(resource.type==='image'){
                const img=new Image();
                img.onload=resolveLoad;
                img.onerror=resolveLoad;
                img.src=resource.url;
            }else{
                const video=document.createElement('video');
                video.preload='metadata';
                video.onloadedmetadata=resolveLoad;
                video.onerror=resolveLoad;
                video.src=resource.url;
            }
        });
    })).then(()=>{
        initLazyImgLoad();
        initVideoHoverPreview();
        initPreviewAnimation();
        initNewsScrollAnimation();
    });
}

// åŠ è½½æ–°é—»å†…å®¹
function loadNewsContent() {
    const newsContainer = document.getElementById('newsScroll');
    newsContainer.innerHTML = `<div class="news-loading">âœ¨ åŠ è½½åŠ¨æ€å†…å®¹ä¸­...</div>`;
    
    return new Promise((resolve) => {
        fetch('moguone/news.txt')
            .then(res => res.text())
            .then(text => {
                const newsList = text.replace(/\r\n/g,'\n').split('---').map(n=>n.trim()).filter(n=>n.length);
                newsDataList = [];
                newsList.forEach((newsStr, index) => {
                    let title="æœ€æ–°å…¬å‘Š",content="",imgSrcList=[],videoSrcList=[],date="2026-01-18 00:00";
                    newsStr.split('\n').map(l=>l.trim()).filter(l=>l).forEach(line=>{
                        if(line.startsWith('ã€')&&line.endsWith('ã€‘')) title=line.slice(1,-1);
                        else if(line.startsWith('img::')) imgSrcList.push(line.slice(5));
                        else if(line.startsWith('video::')) videoSrcList.push(line.slice(7));
                        else if(line.startsWith('date::')) date=line.slice(5);
                        else content += line + '<br>';
                    });
                    newsDataList.push({title,content,imgSrcList,videoSrcList,date});
                });
                newsDataList = newsDataList.reverse();
                renderNewsList(newsDataList);
                resolve();
            })
            .catch(()=>{
                newsContainer.innerHTML='';
                const errorDom=document.createElement('div');
                errorDom.className='news-item';
                errorDom.style.color='#38a169';
                errorDom.style.textAlign='center';
                errorDom.style.padding='30px';
                errorDom.textContent='æ–°é—»åŠ è½½å¤±è´¥ âœ˜ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„';
                newsContainer.appendChild(errorDom);
                resolve();
            });
    });
}

// æœç´¢åŠŸèƒ½
function initSearchFunc() {
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.getElementById('searchBtn');
    const resetBtn = document.getElementById('resetBtn');
    let searchDebounce = null;

    const doSearch = () => {
        const keyword = searchInput.value.trim().toLowerCase();
        if (!keyword) {
            showTipModal();
            searchInput.focus();
            return;
        }
        const filterList = newsDataList.filter(item => {
            return item.title.toLowerCase().includes(keyword) || item.content.toLowerCase().includes(keyword);
        });
        renderNewsList(filterList);
    }

    searchBtn.addEventListener('click', doSearch);
    searchInput.addEventListener('keyup', (e) => {
        if(e.key === 'Enter') {
            clearTimeout(searchDebounce);
            doSearch();
        }
    });

    resetBtn.addEventListener('click', () => {
        searchInput.value = '';
        document.getElementById('imgPreviewMask').classList.remove('show');
        closeNewsModal();
        renderNewsList(newsDataList);
        searchInput.focus();
        window.scrollTo({top: 0, behavior: 'smooth'});
    });
}

// å›¾ç‰‡é¢„è§ˆåŠ¨ç”»
function initPreviewAnimation() {
    const mask = document.getElementById('imgPreviewMask');
    const previewImg = document.getElementById('previewImg');
    const previewVideo = document.getElementById('previewVideo');
    const mediaItems = document.querySelectorAll('.news-img-item, .news-video-item, .modal-news-img-item');
    
    mediaItems.forEach(item => {
        item.addEventListener('click', function(e) {
            e.stopPropagation();
            scrollTopVal = window.scrollY;
            document.body.style.overflow = 'hidden';
            mask.classList.add('show');
            
            previewImg.style.display = 'none';
            previewVideo.style.display = 'none';
            previewVideo.pause();
            previewVideo.currentTime = 0;
            previewVideo.muted = false;
            
            const realSrc = this.src || this.dataset.src;
            if(this.tagName === 'IMG' && realSrc) {
                previewImg.src = realSrc;
                previewImg.style.display = 'block';
                previewImg.classList.add('loaded');
            } else if(this.tagName === 'VIDEO' && realSrc) {
                previewVideo.src = realSrc;
                previewVideo.style.display = 'block';
                previewVideo.classList.add('loaded');
                setTimeout(() => previewVideo.play().catch(e => {}), 100);
            }
        });
    });

    mask.addEventListener('click', function() {
        mask.classList.remove('show');
        if(!document.getElementById('newsModalMask').classList.contains('show')) {
            document.body.style.overflow = 'auto';
            window.scrollTo(0, scrollTopVal);
        }
        previewVideo.pause();
        previewVideo.src = '';
        previewVideo.muted = true;
        previewImg.src = '';
    });
}

// éŸ³ä¹æ’­æ”¾å™¨
function initMusicPlayer() {
    const playBtn = document.getElementById('playBtn');
    const music = document.getElementById('music');
    music.volume = 0.5;
    let isPlay = false;

    // è¯»å–æœ¬åœ°éŸ³ä¹æ’­æ”¾çŠ¶æ€
    const musicState = JSON.parse(localStorage.getItem('musicPlayerState')) || {
        isPlay: false,
        currentTime: 0,
        volume: 0.5
    };
    music.volume = musicState.volume;
    music.currentTime = musicState.currentTime;
    isPlay = musicState.isPlay;

    if (isPlay) {
        playBtn.className = 'music-btn pause-icon';
        music.play().then(() => {}).catch(e => {});
    } else {
        playBtn.className = 'music-btn play-icon';
        music.pause();
    }

    playBtn.addEventListener('click', function() {
        if (isPlay) {
            music.pause();
            playBtn.className = 'music-btn play-icon';
            isPlay = false;
        } else {
            music.play().then(() => {
                playBtn.className = 'music-btn pause-icon';
                isPlay = true;
            }).catch(e => {});
        }
        saveMusicState();
    });

    music.addEventListener('timeupdate', function() {
        saveMusicState();
    });

    function saveMusicState() {
        localStorage.setItem('musicPlayerState', JSON.stringify({
            isPlay: isPlay,
            currentTime: music.currentTime,
            volume: music.volume
        }));
    }

    // è‡ªåŠ¨æ’­æ”¾å°è¯•
    setTimeout(() => {
        if (!isPlay) {
            music.play().then(() => {
                playBtn.className = 'music-btn pause-icon';
                isPlay = true;
                saveMusicState();
            }).catch(e => {});
        }
    }, 1500);
}

// é¡µé¢åˆå§‹åŒ–
async function initPageWithLoader() {
    const loader = document.getElementById('loader');
    document.body.style.overflow = 'hidden';
    
    await Promise.all([
        loadNewsContent(),
        new Promise(resolve => setTimeout(resolve, 1000))
    ]);

    setTimeout(() => {
        loader.classList.add('loaded');
        document.body.style.overflow = 'auto';
        initTheme();
        initVisitCount();
        initMusicPlayer();
        initSearchFunc();
        initAddBgFunc();
    }, 300);
}

// é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
document.addEventListener('DOMContentLoaded', function() {
    const loader = document.getElementById('loader');
    loader.classList.remove('loaded');
    
    // ========== æ ¸å¿ƒä¿®æ”¹1ï¼šå…ˆè¯»å–æœ¬åœ°è‡ªå®šä¹‰å£çº¸ç¼“å­˜ï¼Œå†åŠ è½½å†…ç½®å£çº¸ ==========
    initCustomBg();
    // å†åˆå§‹åŒ–å£çº¸ï¼ˆæ­¤æ—¶è‡ªå®šä¹‰å£çº¸å·²ç»åŠ è½½åˆ°å†…å­˜é‡Œäº†ï¼‰
    initRandomBg();
	setTimeout(()=>{initRandomBg()},300);
    
    document.getElementById('bgChangeBtn').addEventListener('click', changeRandomBg);

    // å£çº¸å¼¹çª—å…³é—­æŒ‰é’®ç»‘å®š
    document.getElementById('bgModalCloseBtn').addEventListener('click', function(e) {
        e.stopPropagation();
        closeBgModal();
    });

    // åŠ è½½æ›´æ–°æ—¥å¿—
    fetch('moguone/log.txt').then(res => res.text()).then(text => {
        const logContainer = document.querySelector('.sidebar-update-log');
        text.replace(/\r\n/g, '\n').split('\n').filter(l => l.trim()).forEach(line => {
            const dom = document.createElement('div');
            if (line.startsWith('V')) {
                dom.className = 'update-log-version';
            } else if (line.startsWith('20')) {
                dom.className = 'update-log-time-text';
            } else {
                dom.className = 'update-log-content';
            }
            dom.textContent = line.trim();
            logContainer.appendChild(dom);
        });
    }).catch(() => {
        const dom = document.createElement('div');
        dom.className = 'update-log-content';
        dom.style.color = '#38a169';
        dom.textContent = ' æ—¥å¿—åŠ è½½å¤±è´¥ âœ˜ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„ ';
        document.querySelector('.sidebar-update-log').appendChild(dom);
    });

    initPageWithLoader();

    // æ–°é—»å¼¹çª—å…³é—­
    document.getElementById('modalCloseBtn').addEventListener('click', function(e) {
        e.stopPropagation();
        closeNewsModal();
    });
    document.getElementById('newsModalMask').addEventListener('click', function(e) {
        if(e.target === this) closeNewsModal();
    });

    // æç¤ºå¼¹çª—å…³é—­
    document.getElementById('tipModalCloseBtn').addEventListener('click', function(e) {
        e.stopPropagation();
        hideTipModal();
    });
    document.getElementById('tipModalMask').addEventListener('click', function(e) {
        if(e.target === this) hideTipModal();
    });

    // è¿”å›é¡¶éƒ¨æŒ‰é’®
    document.getElementById('sidebarTop').addEventListener('click', () => {
        window.scrollTo({top: 0, behavior: 'smooth'});
    });
});
</script>
</body>
</html>
