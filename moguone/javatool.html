<!DOCTYPE html>
<html lang="zh-CN" data-theme-mode="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MY HOME ä¸ªäººä¸»é¡µ-Javaé¡¹ç›®å·¥å…·">
    <meta name="keywords" content="Homepage,JavaTool,Javaé¡¹ç›®è§£æ,ä»£ç æå–">
    <meta name="author" content="MY HOME">
    <title>Javaé¡¹ç›®å·¥å…·ï¼ˆç»“æ„è§£æ+ä»£ç æå–ï¼‰- MY HOME ä¸ªäººå·¥å…·ä¸»é¡µ</title>
    <!-- å¼•å…¥å’Œä¸»é¡µå®Œå…¨ä¸€è‡´çš„å­—ä½“+å›¾æ ‡åº“ -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Mulish:400,700%7CNoto%20Serif%20SC:400,700&display=swap" rel="stylesheet">
    <link rel="preload" href="//at.alicdn.com/t/c/font_4552607_0khxww3tj3q9.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/dmego-home-page@latest/assets/css/iconfont.css">
    <style>
        * {margin: 0;padding: 0;box-sizing: border-box;}
        body {
            font-family: "Mulish", "Noto Serif SC", "Microsoft YaHei", "PingFang SC", "Consolas", "Monaco", sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            background: #171a22;
            color: #ddd;
            scroll-behavior: smooth;
            opacity: 1;
            position: relative;
        }
        body::before {
            content: "";
            position: fixed;
            top: 0;left: 0;right:0;bottom:0;
            background: linear-gradient(rgba(15, 18, 26, 0.95),rgba(15, 18, 26, 0.9));
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
            z-index: 0;
        }
        a {text-decoration: none; color: inherit;}
        ul {list-style: none;}
        img {max-width: 100%; border-radius: 8px;}
        .rotate {transition: transform 3s ease-in-out infinite;}
        .rotate:hover {transform: rotate(360deg);}
        [data-aos] {opacity: 0; transition-duration: 0.8s;}
        [data-aos].aos-animate {opacity: 1; transform: translate(0);}

        /* âœ… ä¸»é¡µåŒæ¬¾ï¼šåŠ è½½åŠ¨ç”» æ ¸å¿ƒçµé­‚ é…è‰²æ”¹ä¸ºæš—çº¢ #d83636 */
        #loader {position: fixed;top:0;left:0;right:0;bottom:0;background:rgba(15,18,26,0.98);z-index:9999;display:flex;align-items:center;justify-content:center;flex-direction:column;}
        .loading-left-bg,.loading-right-bg{position:absolute;top:0;width:50%;height:100%;background:#22262c;transition:all 0.6s ease;}
        .loading-left-bg{left:0;}
        .loading-right-bg{right:0;}
        .spinner-box{text-align:center;}
        .loading-taichi svg{width:80px;height:80px;fill:#d83636;}
        .loading-word{margin-top:20px;color:#f56464;font-size:16px;letter-spacing:2px;}
        #loader.loading .loading-left-bg{transform:translateX(-100%);}
        #loader.loading .loading-right-bg{transform:translateX(100%);}
        #loader.loading{opacity:0;visibility:hidden;transition:all 0.6s ease;}

        /* âœ… é¡¶éƒ¨å¯¼èˆªæ  å®Œå…¨å’Œä¸»é¡µä¸€è‡´+å½“å‰é¡µé«˜äº®+æ‚¬æµ®åŠ¨æ•ˆ è·³è½¬æ ¸å¿ƒ æš—é»‘ç£¨ç ‚ç»ç’ƒç‰ˆ */
        #header-nav {
            width: 100%;
            background: rgba(28, 32, 42, 0.8);
            backdrop-filter: blur(10px);-webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 80, 80, 0.15);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 999;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        .main-nav-link-wrap {margin:0 12px;display:inline-block;}
        .main-nav-link {
            padding: 8px 18px;
            font-size: 15px;
            color: #ccc;
            border-radius: 20px;
            transition: all 0.4s ease;
        }
        .main-nav-link.active {
            background: rgba(216, 54, 54, 0.2);
            color: #f56464;
            font-weight: 700;
        }
        .main-nav-link:hover:not(.active) {color:#f56464;}

        /* âœ… ä¸»ä½“å®¹å™¨ï¼šæš—é»‘ç£¨ç ‚ç»ç’ƒé£æ ¼ å±…ä¸­å®½+æš—çº¢è¾¹æ¡†+æŸ”å½±+åœ†è§’ */
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding:0 20px;
            position: relative;
            z-index: 2;
        }
        .article-inner {
            background: rgba(28, 32, 42, 0.85);
            backdrop-filter: blur(10px);-webkit-backdrop-filter: blur(10px);
            border-radius:16px;
            padding:35px;
            box-shadow:0 2px 12px rgba(0,0,0,0.2);
            border:1px solid rgba(255,255,255,0.08);
            opacity:0;transform:translateY(15px);
            animation: containerFadeIn 0.8s ease-out forwards;
            animation-delay:0.2s;
        }
        @keyframes containerFadeIn {
            100% {opacity:1;transform:translateY(0);}
        }

        h1 {
            color: #fff;
            text-align: center;
            margin-bottom:10px;font-size:28px;
            font-weight:700;
        }
        .subtitle {text-align:center;color:#999;font-size:14px;margin-bottom:30px;}

        /* âœ… å…¼å®¹è­¦å‘Šæç¤ºæ¡† æš—é»‘é£æ ¼è´´åˆ */
        .compatibility-alert {
            color: #f56464;
            padding:12px;background:rgba(216, 54, 54, 0.1);border-radius:10px;margin-bottom:20px;text-align:center;display:none;
            border:1px solid rgba(245, 100, 100, 0.25);
        }

        /* âœ… ä¸Šä¼ åŒºåŸŸ æš—é»‘é£æ ¼ï¼šè™šçº¿è¾¹æ¡†+æš—çº¢é€åº•+æ‚¬æµ®æŸ”å˜ */
        .upload-area {
            border:2px dashed rgba(245, 100, 100, 0.25);border-radius:12px;padding:40px 20px;text-align:center;margin-bottom:30px;cursor:pointer;
            transition:all 0.4s ease;background:rgba(216, 54, 54, 0.05);
        }
        .upload-area:hover {border-color:#f56464;background:rgba(216, 54, 54, 0.1);}
        .upload-area.active {border-color:#f56464;}
        .upload-area p {color:#999;margin-top:10px;font-size:14px;}
        #folder-input {display:none;}

        /* âœ… æŒ‰é’®æ ·å¼ å®Œå…¨å¤ç”¨è€ƒè¯•ç³»ç»Ÿçš„æš—é»‘é£æ ¼ æ ¸å¿ƒï¼šæš—çº¢é€åº•+æ‚¬æµ®å˜çº¢+ä¸Šç§»+æŸ”å½±+æŒ‰å‹å›å¼¹ */
        .btn {
            padding:12px 28px;border-radius:30px;
            background:rgba(216, 54, 54, 0.15);border:1px solid rgba(245, 100, 100, 0.25);
            color:#f56464;font-size:16px;font-weight:500;
            transition:all 0.4s cubic-bezier(0.22,1,0.36,1);
            border:none;cursor:pointer;margin:0 5px;
        }
        .btn:hover {
            background:#d83636;color:#fff;
            transform:translateY(-2px);
            box-shadow:0 5px 15px rgba(216,54,54,0.2);
        }
        .btn:active {transform:translateY(0);}
        .btn-secondary {background:rgba(50,55,68,0.7);border:1px solid rgba(255,255,255,0.08);color:#ccc;}
        .btn-secondary:hover {background:rgba(70,76,90,0.8);color:#eee;box-shadow:0 5px 15px rgba(0,0,0,0.15);}
        .btn-success {background:rgba(40,167,69,0.15);border:1px solid rgba(40,167,69,0.25);color:#64d380;}
        .btn-success:hover {background:#28a745;color:#fff;box-shadow:0 5px 15px rgba(40,167,69,0.2);}
        .btn:disabled {background:rgba(50,55,68,0.7);cursor:not-allowed;transform:none;box-shadow:none;opacity:0.6;color:#999;border-color:rgba(255,255,255,0.08);}

        .btn-group {text-align:center;margin-bottom:20px;}

        /* âœ… åŠŸèƒ½æ¨¡å— æ— é¢å¤–è¾¹æ¡† è´´åˆå¡ç‰‡å†…é—´è· */
        .module {
            margin-bottom:30px;padding:20px 0;border-bottom:1px solid rgba(255,255,255,0.08);
        }
        .module:last-child {border-bottom:none;}
        .module h2 {color:#eee;font-size:18px;margin-bottom:15px;padding-bottom:8px;border-bottom:1px solid rgba(255,255,255,0.08);}

        /* âœ… æ ‘å½¢ç»“æ„è¾“å‡ºæ¡† æš—é»‘é£æ ¼é€‚é…ï¼šç°é»‘è¾¹æ¡†+åœ†è§’+ä»£ç å­—ä½“+æŠ¤çœ¼èƒŒæ™¯ */
        #structure-output {
            width:100%;min-height:200px;border:1px solid rgba(255,255,255,0.08);border-radius:10px;padding:15px;
            font-family:"Consolas","Monaco",monospace;font-size:14px;line-height:1.6;resize:vertical;
            background:rgba(35, 40, 52, 0.7);white-space:pre;overflow-x:auto;color:#ddd;outline:none;
        }
        #structure-output:focus {border-color:#f56464;}

        /* âœ… æ–‡ä»¶åˆ—è¡¨åŒºåŸŸ æš—é»‘é£æ ¼é€‚é… */
        .file-list {max-height:200px;overflow-y:auto;border:1px solid rgba(255,255,255,0.08);border-radius:10px;padding:10px;margin-bottom:15px;background:rgba(35, 40, 52, 0.7);}
        .file-item {padding:6px 0;color:#ddd;border-bottom:1px dashed rgba(255,255,255,0.08);font-size:14px;}
        .file-item:last-child {border-bottom:none;}
        .file-item .path {color:#999;font-size:12px;margin-left:10px;}

        /* âœ… çŠ¶æ€æç¤ºæ¡† åŠ è½½/æˆåŠŸ/å¤±è´¥ æš—é»‘é£æ ¼è´´åˆ */
        .status {margin:10px 0;padding:12px;border-radius:10px;text-align:center;font-size:14px;display:none;}
        .status.loading {background:rgba(50,55,68,0.7);color:#ccc;border:1px solid rgba(255,255,255,0.08);}
        .status.success {background:rgba(40,167,69,0.1);color:#64d380;border:1px solid rgba(40,167,69,0.2);}
        .status.error {background:rgba(216, 54, 54, 0.1);color:#f56464;border:1px solid rgba(216, 54, 54, 0.2);}

        /* âœ… æç¤ºæ–‡æœ¬ æš—é»‘é£æ ¼é€‚é… */
        .tip {color:#999;font-size:12px;margin-top:10px;text-align:center;}
        .filter-tips {color:#999;font-size:12px;margin-top:15px;text-align:center;line-height:1.6;}

        /* âœ… ä¾§è¾¹ç½®é¡¶æŒ‰é’® å®Œå…¨å’Œè€ƒè¯•ç³»ç»Ÿä¸€è‡´ æš—é»‘ç£¨ç ‚ç»ç’ƒç‰ˆ */
        .sidebar-top {
            position:fixed;bottom:30px;right:30px;z-index:99;
            width:40px;height:40px;background:rgba(28, 32, 42, 0.8);
            backdrop-filter: blur(8px);-webkit-backdrop-filter: blur(8px);
            border-radius:50%;box-shadow:0 2px 10px rgba(0,0,0,0.15);
            display:flex;align-items:center;justify-content:center;
            cursor:pointer;transition:all 0.3s ease;
            border:1px solid rgba(255,255,255,0.08);
        }
        .sidebar-top:hover {background:#d83636;color:#fff;}
        .arrow-up {font-size:18px;}

        /* âœ… åº•éƒ¨ç‰ˆæƒ å®Œå…¨å’Œè€ƒè¯•ç³»ç»Ÿä¸€è‡´ æš—é»‘é£æ ¼ */
        #footer {
            width:100%;text-align:center;
            padding:30px 0;margin-top:50px;
            color:#999;font-size:13px;
            border-top:1px solid rgba(255,255,255,0.08);
            position: relative;
            z-index: 2;
        }
        #footer a {color:#f56464;}
        #footer a:hover {text-decoration:underline;}

        /* âœ… ç§»åŠ¨ç«¯å®Œç¾é€‚é… å¤ç”¨è€ƒè¯•ç³»ç»Ÿçš„å“åº”å¼é€»è¾‘ */
        @media (max-width:768px) {
            .article-inner {padding:25px;}
            h1 {font-size:24px;}
            .btn {padding:10px 22px;font-size:15px;margin:0 3px 8px;}
            .upload-area {padding:30px 10px;}
            .sidebar-top {bottom:20px;right:20px;}
        }

        /* AOSæ¸å…¥åŠ¨ç”» å®Œå…¨å’Œè€ƒè¯•ç³»ç»Ÿä¸€è‡´ */
        .aos-fade-up {transform:translateY(20px);}
        .aos-slide-up {transform:translateY(10px);}
    </style>
</head>
<body>
    <!-- âœ… è€ƒè¯•ç³»ç»ŸåŒæ¬¾ï¼šåŠ è½½åŠ¨ç”» æš—çº¢é…è‰² -->
    <div id='loader'>
        <div class="loading-left-bg loading-bg"></div>
        <div class="loading-right-bg loading-bg"></div>
        <div class="spinner-box">
            <div class="loading-taichi rotate">
                <svg width="150" height="150" viewBox="0 0 1024 1024" class="icon" xmlns="https://www.w3.org/2000/svg">
                    <path d="M303.5 432A80 80 0 0 1 291.5 592A80 80 0 0 1 303.5 432z" fill="#d83636" />
                    <path d="M512 65A447 447 0 0 1 512 959L512 929A417 417 0 0 0 512 95A417 417 0 0 0 512 929L512 959A447 447 0 0 1 512 65z M512 95A417 417 0 0 1 929 512A208.5 208.5 0 0 1 720.5 720.5L720.5 592A80 80 0 0 0 720.5 432A80 80 0 0 0 720.5 592L720.5 720.5A208.5 208.5 0 0 1 512 512A208.5 208.5 0 0 0 303.5 303.5A208.5 208.5 0 0 0 95 512A417 417 0 0 1 512 95z" fill="#d83636" />
                </svg>
            </div>
            <div class="loading-word">å°‘å¥³ç¥ˆç¥·ä¸­...</div>
        </div>
    </div>

    <!-- âœ… é¡¶éƒ¨å¯¼èˆªæ  å®Œå…¨å’Œè€ƒè¯•ç³»ç»Ÿä¸€è‡´ ä¿ç•™æ‰€æœ‰è·³è½¬+å½“å‰é¡µé«˜äº® -->
    <nav id="header-nav">
        
    </nav>

    <!-- âœ… ä¸»ä½“å†…å®¹ ä¿ç•™æ‰€æœ‰åŸæœ‰åŠŸèƒ½æ¨¡å—+å¸ƒå±€ æ— ä»»ä½•åˆ å‡ -->
    <div class="container">
        <article class="article-inner" data-aos="fade-up">
            <h1 data-aos="slide-up">Javaé¡¹ç›®å·¥å…·(ç»“åˆè±†åŒ…é£Ÿç”¨æ›´å¥½ï¼ï¼)</h1>
            <div class="subtitle" data-aos="slide-up">åªéœ€è¦å¯¼å…¥ä½ çš„javaé¡¹ç›®çš„ç›®å½•å°±å¯ä»¥ä¸€é”®è§£æé¡¹ç›®ç»“æ„ + æå–åˆå¹¶ä»£ç æ–‡ä»¶</div>
            
            <div class="compatibility-alert" id="compatibility-alert">
                è­¦å‘Šï¼šå½“å‰æµè§ˆå™¨ä¸æ”¯æŒæ–‡ä»¶å¤¹é€‰æ‹©åŠŸèƒ½ï¼Œè¯·ä½¿ç”¨Chrome/Edgeæµè§ˆå™¨ï¼
            </div>
            
            <div class="upload-area" id="upload-area" data-aos="fade-up">
                <input type="file" id="folder-input" webkitdirectory directory multiple />
                <span class="btn">é€‰æ‹©Javaé¡¹ç›®æ–‡ä»¶å¤¹</span>
                <p>ç‚¹å‡»æŒ‰é’®é€‰æ‹©ä½ çš„Javaé¡¹ç›®æ ¹æ–‡ä»¶å¤¹ï¼Œæ”¯æŒå¤šçº§ç›®å½•è§£æå’Œä»£ç æå–</p>
            </div>

            <div class="btn-group" data-aos="fade-up">
                <button class="btn btn-secondary" id="clear-all-btn">æ¸…ç©ºæ‰€æœ‰å†…å®¹</button>
            </div>

            <div class="module" data-aos="fade-up">
                <h2>1. é¡¹ç›®ç»“æ„è§£æ</h2>
                <div style="text-align: center; margin-bottom: 10px;">
                    <button class="btn btn-secondary" id="copy-structure-btn">å¤åˆ¶ç»“æ„</button>
                </div>
                <textarea id="structure-output" readonly placeholder="é€‰æ‹©æ–‡ä»¶å¤¹åå°†æ˜¾ç¤ºé¡¹ç›®æ ‘å½¢ç»“æ„..."></textarea>
            </div>

            <div class="module" data-aos="fade-up">
                <h2>2. ä»£ç æ–‡ä»¶æå–åˆå¹¶</h2>
                <div class="file-list" id="file-list">æš‚æ— ç¬¦åˆè§„åˆ™çš„æ–‡ä»¶</div>
                <div class="status loading" id="loading-msg">æ­£åœ¨å¤„ç†ï¼Œè¯·ç¨å€™...</div>
                <div class="status success" id="success-msg"></div>
                <div class="status error" id="error-msg"></div>
                <div style="text-align: center; marginTop: 15px;">
                    <button class="btn" id="merge-code-btn" disabled>æå–å¹¶åˆå¹¶ä»£ç </button>
                    <button class="btn btn-success" id="download-code-btn" disabled>ä¸‹è½½åˆå¹¶åçš„TXT</button>
                </div>
                <div class="filter-tips">
                    åŒ…å«æ–‡ä»¶ç±»å‹ï¼š.java .jsp .xml .html .css .js .txt .properties<br/>
                    æ’é™¤æ–‡ä»¶ç±»å‹ï¼š.jar .class .zip .rar .exe .dll .png .jpg .gif .mp4
                </div>
            </div>

            <p class="tip">æç¤ºï¼šè¯¥å·¥å…·ä»…åœ¨æœ¬åœ°è¿è¡Œï¼Œä¸ä¼šä¸Šä¼ ä½ çš„ä»»ä½•æ–‡ä»¶æ•°æ®</p>
        </article>
    </div>

    <!-- âœ… ä¾§è¾¹ç½®é¡¶æŒ‰é’® å®Œå…¨å’Œè€ƒè¯•ç³»ç»Ÿä¸€è‡´ æš—é»‘ç£¨ç ‚ç»ç’ƒç‰ˆ -->
    <div class="sidebar-top" onclick="window.scrollTo({top:0,behavior:'smooth'})">
        <div class="arrow-up">â†‘</div>
    </div>

    <!-- âœ… åº•éƒ¨ç‰ˆæƒ å®Œå…¨å’Œè€ƒè¯•ç³»ç»Ÿä¸€è‡´ -->
    <footer id="footer">
        <span>Copyright Â©2025 - 2026 MY HOME. All rights reserved.</span>
        <a href="https://beian.miit.gov.cn/" target="_blank">bugå’¨è¯¢ğŸ§2926197119</a>
    </footer>

    <script>
        const isSupported = 'webkitdirectory' in HTMLInputElement.prototype;
        let allFiles = [];
        let scannedFiles = [];
        let mergedContent = "";

        const ALLOWED_EXTENSIONS = ['.java', '.jsp', '.xml', '.html', '.css', '.js', '.txt', '.properties'];
        const EXCLUDED_EXTENSIONS = ['.jar', '.class', '.zip', '.rar', '.exe', '.dll', '.png', '.jpg', '.jpeg', '.gif', '.mp4', '.avi', '.pdf'];

        const compatibilityAlert = document.getElementById('compatibility-alert');
        const uploadArea = document.getElementById('upload-area');
        const folderInput = document.getElementById('folder-input');
        const structureOutput = document.getElementById('structure-output');
        const copyStructureBtn = document.getElementById('copy-structure-btn');
        const clearAllBtn = document.getElementById('clear-all-btn');
        const fileList = document.getElementById('file-list');
        const loadingMsg = document.getElementById('loading-msg');
        const successMsg = document.getElementById('success-msg');
        const errorMsg = document.getElementById('error-msg');
        const mergeCodeBtn = document.getElementById('merge-code-btn');
        const downloadCodeBtn = document.getElementById('download-code-btn');

        window.onload = () => {
            if (!isSupported) compatibilityAlert.style.display = 'block';
            hideLoading();
            bindEvents();
        };

        function bindEvents() {
            uploadArea.addEventListener('click', () => {
                if (!isSupported) {alert('å½“å‰æµè§ˆå™¨ä¸æ”¯æŒæ–‡ä»¶å¤¹é€‰æ‹©ï¼Œè¯·ä½¿ç”¨Chrome/Edgeï¼');return;}
                folderInput.click();
            });

            uploadArea.addEventListener('dragover', (e) => {e.preventDefault();uploadArea.classList.add('active');});
            uploadArea.addEventListener('dragleave', () => {uploadArea.classList.remove('active');});
            uploadArea.addEventListener('drop', async (e) => {
                e.preventDefault();uploadArea.classList.remove('active');if (!isSupported) return;
                try {
                    showLoading();hideError();hideSuccess();
                    const items = e.dataTransfer.items;allFiles = [];scannedFiles = [];
                    for (let i = 0; i < items.length; i++) {
                        const item = items[i];if (item.kind === 'file') {
                            const entry = item.webkitGetAsEntry();if (entry) {
                                if (entry.isDirectory) await traverseDirectory(entry, '');
                                else await handleFileEntry(entry, '');
                            }
                        }
                    }
                    const structure = buildProjectStructure(allFiles);structureOutput.value = structure;
                    renderFileList();mergeCodeBtn.disabled = scannedFiles.length === 0;
                    hideLoading();showSuccess(`å¤„ç†å®Œæˆï¼é¡¹ç›®ç»“æ„å·²ç”Ÿæˆï¼Œå…±æ‰«æåˆ° ${scannedFiles.length} ä¸ªå¯æå–çš„ä»£ç æ–‡ä»¶`);
                } catch (err) {hideLoading();showError(`å¤„ç†å¤±è´¥ï¼š${err.message}`);console.error(err);}
            });

            folderInput.addEventListener('change', async (e) => {
                const files = e.target.files;if (files.length === 0) {alert('æœªé€‰æ‹©ä»»ä½•æ–‡ä»¶ï¼Œè¯·é€‰æ‹©å®Œæ•´çš„Javaé¡¹ç›®æ–‡ä»¶å¤¹ï¼');return;}
                try {
                    showLoading();hideError();hideSuccess();
                    allFiles = Array.from(files);
                    scannedFiles = allFiles.filter(file => isFileAllowed(file.name)).map(file => ({file: file,name: file.name,path: file.webkitRelativePath || file.name}));
                    const structure = buildProjectStructure(allFiles);structureOutput.value = structure;
                    renderFileList();mergeCodeBtn.disabled = scannedFiles.length === 0;
                    hideLoading();showSuccess(`å¤„ç†å®Œæˆï¼é¡¹ç›®ç»“æ„å·²ç”Ÿæˆï¼Œå…±æ‰«æåˆ° ${scannedFiles.length} ä¸ªå¯æå–çš„ä»£ç æ–‡ä»¶`);
                } catch (err) {hideLoading();showError(`å¤„ç†å¤±è´¥ï¼š${err.message}`);console.error(err);}
            });

            copyStructureBtn.addEventListener('click', () => {
                if (!structureOutput.value) {alert('æš‚æ— é¡¹ç›®ç»“æ„å¯å¤åˆ¶ï¼');return;}
                structureOutput.select();document.execCommand('copy');alert('é¡¹ç›®ç»“æ„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            });

            clearAllBtn.addEventListener('click', () => {
                structureOutput.value = '';fileList.innerHTML = 'æš‚æ— ç¬¦åˆè§„åˆ™çš„æ–‡ä»¶';
                scannedFiles = [];allFiles = [];mergedContent = '';folderInput.value = '';
                mergeCodeBtn.disabled = true;downloadCodeBtn.disabled = true;
                hideSuccess();hideError();
            });

            mergeCodeBtn.addEventListener('click', async () => {
                try {
                    showLoading("æ­£åœ¨æå–å¹¶åˆå¹¶æ–‡ä»¶å†…å®¹...");hideError();hideSuccess();
                    mergedContent = "";
                    mergedContent += "======= Javaé¡¹ç›®ä»£ç æå–ç»“æœ =======\n";
                    mergedContent += `æå–æ—¶é—´ï¼š${new Date().toLocaleString()}\n`;
                    mergedContent += `æ–‡ä»¶æ€»æ•°ï¼š${scannedFiles.length}\n`;
                    mergedContent += "=====================================\n\n";
                    for (let i = 0; i < scannedFiles.length; i++) {
                        const item = scannedFiles[i];const content = await readFileContent(item.file);
                        mergedContent += `=================== ã€${item.path}ã€‘ å¼€å§‹ ===================\n`;
                        mergedContent += content + '\n';
                        mergedContent += `=================== ã€${item.path}ã€‘ ç»“æŸ ===================\n\n`;
                    }
                    hideLoading();showSuccess(`æ–‡ä»¶åˆå¹¶æˆåŠŸï¼å…±æå– ${scannedFiles.length} ä¸ªæ–‡ä»¶çš„å†…å®¹`);
                    downloadCodeBtn.disabled = false;
                } catch (error) {hideLoading();showError(`æ–‡ä»¶åˆå¹¶å¤±è´¥ï¼š${error.message}`);downloadCodeBtn.disabled = true;}
            });

            downloadCodeBtn.addEventListener('click', () => {
                if (!mergedContent) {showError("æš‚æ— åˆå¹¶åçš„æ–‡ä»¶å†…å®¹");return;}
                const blob = new Blob([mergedContent], { type: 'text/plain; charset=utf-8' });
                const url = URL.createObjectURL(blob);const a = document.createElement('a');
                a.href = url;a.download = `java_project_code_${new Date().getTime()}.txt`;a.click();URL.revokeObjectURL(url);
                showSuccess("ä»£ç æ–‡ä»¶å·²å¼€å§‹ä¸‹è½½ï¼");
            });
        }

        function buildProjectStructure(files) {
            const tree = {};let rootFolder = '';
            Array.from(files).forEach(file => {
                const relativePath = file.webkitRelativePath;
                if (!rootFolder) {rootFolder = relativePath.split('/')[0];tree[rootFolder] = { isFile: false, children: {} };}
                const pathParts = relativePath.split('/');let currentNode = tree[rootFolder].children;
                for (let i = 1; i < pathParts.length; i++) {
                    const part = pathParts[i];const isFile = i === pathParts.length - 1;
                    if (!currentNode[part]) {currentNode[part] = {isFile: isFile,children: {}};}
                    if (!isFile) currentNode = currentNode[part].children;
                }
            });
            return formatTreeToText(tree[rootFolder], rootFolder);
        }

        function formatTreeToText(node, name, level = 0, isLastArr = []) {
            let text = '';let prefix = '';
            if (level > 0) {
                for (let i = 0; i < level - 1; i++) prefix += isLastArr[i] ? '   ' : 'â”‚  ';
                prefix += isLastArr[level - 1] ? 'â””â”€ ' : 'â”œâ”€ ';
            }
            text += `${prefix}${name}${node.isFile ? '' : '/'}\n`;
            const children = node.children;const childNames = Object.keys(children).sort();const total = childNames.length;
            childNames.forEach((childName, index) => {
                const childNode = children[childName];const newIsLastArr = [...isLastArr, index === total - 1];
                text += formatTreeToText(childNode, childName, level + 1, newIsLastArr);
            });
            return text;
        }

        // âœ… ä¿®å¤åŸç”ŸAPI BUGï¼šå¾ªç¯è¯»å–entries è§£å†³ç›®å½•éå†ä¸å…¨é—®é¢˜
        async function traverseDirectory(directoryEntry, parentPath) {
            const reader = directoryEntry.createReader();
            const readEntries = async () => {
                return new Promise((resolve) => {
                    reader.readEntries(resolve);
                });
            };
            let entries;
            do {
                entries = await readEntries();
                for (const entry of entries) {
                    const currentPath = parentPath ? `${parentPath}/${entry.name}` : entry.name;
                    if (entry.isDirectory) await traverseDirectory(entry, currentPath);
                    else await handleFileEntry(entry, currentPath);
                }
            } while (entries.length > 0);
        }

        async function handleFileEntry(fileEntry, filePath) {
            return new Promise((resolve) => {
                fileEntry.file((file) => {
                    allFiles.push(file);
                    if (isFileAllowed(file.name)) {
                        scannedFiles.push({file: file,name: file.name,path: filePath});
                    }
                    resolve();
                });
            });
        }

        function isFileAllowed(fileName) {
            const lowerName = fileName.toLowerCase();
            for (const ext of EXCLUDED_EXTENSIONS) if (lowerName.endsWith(ext)) return false;
            for (const ext of ALLOWED_EXTENSIONS) if (lowerName.endsWith(ext)) return true;
            return false;
        }

        function renderFileList() {
            fileList.innerHTML = '';
            if (scannedFiles.length === 0) {fileList.innerHTML = '<div class="file-item">æš‚æ— ç¬¦åˆè§„åˆ™çš„æ–‡ä»¶</div>';return;}
            scannedFiles.forEach((item, index) => {
                const fileItem = document.createElement('div');fileItem.className = 'file-item';
                fileItem.innerHTML = `${index + 1}. ${item.name} <span class="path">(${item.path})</span>`;
                fileList.appendChild(fileItem);
            });
        }

        function readFileContent(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();reader.readAsText(file, 'UTF-8');
                reader.onload = (e) => resolve(e.target.result);
                reader.onerror = () => {
                    reader.readAsText(file);
                    reader.onload = (e) => resolve(e.target.result);
                    reader.onerror = () => reject(new Error(`è¯»å–æ–‡ä»¶ ${file.name} å¤±è´¥ï¼ˆç¼–ç ä¸æ”¯æŒï¼‰`));
                };
            });
        }

        function showLoading(msg = "æ­£åœ¨å¤„ç†ï¼Œè¯·ç¨å€™...") {loadingMsg.textContent = msg;loadingMsg.style.display = 'block';}
        function hideLoading() {loadingMsg.style.display = 'none';}
        function showSuccess(msg) {successMsg.textContent = msg;successMsg.style.display = 'block';}
        function hideSuccess() {successMsg.style.display = 'none';}
        function showError(msg) {errorMsg.textContent = msg;errorMsg.style.display = 'block';}
        function hideError() {errorMsg.style.display = 'none';}

        // âœ… è€ƒè¯•ç³»ç»ŸåŒæ¬¾åŠ è½½åŠ¨ç”»å…³é—­é€»è¾‘ + AOSæ¸å…¥åŠ¨ç”»
        var time = null;
        var startLoading = () => {time = Date.now();document.getElementById('loader').classList.remove("loading");}
        var endLoading = () => {
            if (!time) {document.body.style.overflow = 'auto';document.getElementById('loader').classList.add("loading");}
            else {
                if (Date.now() - time > 500) {time = null;document.body.style.overflow = 'auto';document.getElementById('loader').classList.add("loading");}
                else {setTimeout(endLoading, 500 - (Date.now() - time));time = null;}
            }
        }
        window.addEventListener('DOMContentLoaded', endLoading);
        document.getElementById('loader').addEventListener('click', endLoading);

        document.addEventListener('DOMContentLoaded', function() {
            const aosElements = document.querySelectorAll('[data-aos]');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('aos-animate');
                        observer.unobserve(entry.target);
                    }
                });
            }, {threshold: 0.1});
            aosElements.forEach(el => observer.observe(el));
        });
    </script>
</body>
</html>